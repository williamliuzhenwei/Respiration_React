{"ast":null,"code":"var _jsxFileName = \"/Users/liuzhenwei/Desktop/Respiration_React/my-app/src/Component/Plot.js\";\nimport React from 'react';\nimport { Button } from 'antd';\nimport { Line } from '@ant-design/charts'; //try microphone example\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar data = [];\nvar timer1 = 0;\nvar entry = {};\nvar res = {}; // Main Plot configuration\n\nconst config = {\n  data,\n  xField: 'TimeStamp',\n  yField: 'Rate',\n  label: {\n    style: {\n      fill: '#aaa'\n    }\n  },\n  point: {\n    size: 1,\n    shape: 'dot'\n  }\n}; // Communicate with particle Photon\n\nconst fetchData = () => {\n  // David https://api.particle.io/v1/devices/440048000d51353532343635/output1?access_token=5337556d927166dd61f24a448628ab25b487250d\n  // Siyuan https://api.particle.io/v1/devices/2d004e000d51353532343635/analogvalue?access_token=4ec91795c48fcb469901a8c61e670f4d75ec5cce\n  return fetch(\"https://api.particle.io/v1/devices/2d004e000d51353532343635/analogvalue?access_token=4ec91795c48fcb469901a8c61e670f4d75ec5cce\").then(response => response.json()).then(data => res = data).then(console.log(res)).catch(error => {\n    throw error;\n  });\n}; // Main Module \n\n\nclass Plot extends React.Component {\n  constructor() {\n    super();\n\n    this.handleClick = () => {\n      this.setState(state => ({\n        isToggleOn: !state.isToggleOn\n      }));\n    };\n\n    this.render = () => {\n      if (this.state.isToggleOn == true) {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            id: \"toggle\",\n            style: {\n              textAlign: 'center'\n            },\n            type: \"primary\",\n            onClick: this.handleClick,\n            children: this.state.isToggleOn ? 'ON' : 'OFF'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Line, { ...config\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true);\n      } else if (this.state.isToggleOn == false) {\n        document.getElementById(\"resRate\").innerHTML = \"Disconnected\"; // data = [];\n\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            id: \"toggle\",\n            style: {\n              textAlign: 'center'\n            },\n            type: \"secondary\",\n            onClick: this.handleClick,\n            children: this.state.isToggleOn ? 'ON' : 'OFF'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Line, { ...config\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true);\n      }\n    };\n\n    this.state = {\n      date: new Date(),\n      isToggleOn: true\n    };\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(() => this.tick(), 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n  }\n\n  tick() {\n    fetchData(); // let resR = Math.floor(Math.random() * (17 - 8) + 8);\n\n    let resR = res.result;\n\n    if (this.state.isToggleOn == true) {\n      if (resR >= 6 && resR <= 60) {\n        // In normal range\n        entry = {\n          TimeStamp: timer1,\n          Rate: Math.round(resR)\n        };\n        timer1 = timer1 + 1;\n        data.push(entry);\n        document.getElementById(\"resRate\").innerHTML = Math.round(resR);\n        document.getElementById(\"resRate\").className = \"resRate_black\";\n      } else if (resR == 0) {\n        // Connected, Measring \n        document.getElementById(\"resRate\").innerHTML = \"Measuring\";\n        document.getElementById(\"resRate\").className = \"resRate_green\";\n      } else if (resR < 6 || resR > 60) {\n        // Bad result \n        console.log(resR);\n        document.getElementById(\"resRate\").innerHTML = \"Check Epidermal Device (Strain Gauge)\";\n        document.getElementById(\"resRate\").className = \"resRate_red\";\n      } else {\n        document.getElementById(\"resRate\").innerHTML = \"Check connection with Photon\";\n        document.getElementById(\"resRate\").className = \"resRate_red\";\n      }\n    } else if (this.state.isToggleOn == false) {\n      entry = {\n        TimeStamp: timer1,\n        Rate: 0\n      };\n      data.push(entry);\n      document.getElementById(\"resRate\").innerHTML = \"Disconnected\";\n    }\n\n    this.setState({\n      date: new Date()\n    });\n  }\n\n}\n\n;\nexport default Plot;","map":{"version":3,"sources":["/Users/liuzhenwei/Desktop/Respiration_React/my-app/src/Component/Plot.js"],"names":["React","Button","Line","data","timer1","entry","res","config","xField","yField","label","style","fill","point","size","shape","fetchData","fetch","then","response","json","console","log","catch","error","Plot","Component","constructor","handleClick","setState","state","isToggleOn","render","textAlign","document","getElementById","innerHTML","date","Date","componentDidMount","timerID","setInterval","tick","componentWillUnmount","clearInterval","resR","result","TimeStamp","Rate","Math","round","push","className"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Button} from 'antd';\nimport { Line } from '@ant-design/charts';\n\n\n\n//try microphone example\nvar data = [];\nvar timer1 = 0;\nvar entry = {};\nvar res = {};\n\n// Main Plot configuration\nconst config = {\n  data,\n  xField: 'TimeStamp',\n  yField: 'Rate',\n  label: {\n    style: {\n      fill: '#aaa',\n    },\n  },\n  point: {\n    size: 1,\n    shape: 'dot',\n  },\n};\n\n// Communicate with particle Photon\nconst fetchData = () => {\n  // David https://api.particle.io/v1/devices/440048000d51353532343635/output1?access_token=5337556d927166dd61f24a448628ab25b487250d\n  // Siyuan https://api.particle.io/v1/devices/2d004e000d51353532343635/analogvalue?access_token=4ec91795c48fcb469901a8c61e670f4d75ec5cce\n  return fetch(\"https://api.particle.io/v1/devices/2d004e000d51353532343635/analogvalue?access_token=4ec91795c48fcb469901a8c61e670f4d75ec5cce\")\n        .then((response) => response.json())\n        .then((data) => res = data)\n        .then(console.log(res))\n        .catch(error => {\n          throw(error);\n        });}\n\n// Main Module \nclass Plot extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n        date: new Date(),\n        isToggleOn: true\n    }\n}\nhandleClick = () => {\n  this.setState(state => ({\n    isToggleOn: !state.isToggleOn\n  }));\n}\n\ncomponentDidMount() {\n    this.timerID = setInterval(\n        () => this.tick(),\n        1000\n    );\n}\n\ncomponentWillUnmount() {\n    clearInterval(this.timerID);\n}\n\ntick() {\n    fetchData();\n    // let resR = Math.floor(Math.random() * (17 - 8) + 8);\n    let resR = res.result;\n    \n    \n  \n  if (this.state.isToggleOn == true){\n    if (resR >= 6 && resR <= 60){ // In normal range\n      entry = {TimeStamp: timer1, Rate: Math.round(resR)};\n      timer1 = timer1 + 1;\n      data.push(entry)\n      document.getElementById(\"resRate\").innerHTML = Math.round(resR);\n      document.getElementById(\"resRate\").className = \"resRate_black\";\n    } else if (resR == 0){  // Connected, Measring \n      document.getElementById(\"resRate\").innerHTML = \"Measuring\";\n      document.getElementById(\"resRate\").className = \"resRate_green\";\n    }\n    else if (resR < 6 || resR > 60){  // Bad result \n      console.log(resR);\n      document.getElementById(\"resRate\").innerHTML = \"Check Epidermal Device (Strain Gauge)\";\n      document.getElementById(\"resRate\").className = \"resRate_red\";\n    } else { \n      document.getElementById(\"resRate\").innerHTML = \"Check connection with Photon\";\n      document.getElementById(\"resRate\").className = \"resRate_red\";\n    }\n    \n  } else if (this.state.isToggleOn == false) {\n    entry = {TimeStamp: timer1, Rate: 0}\n    data.push(entry)\n    document.getElementById(\"resRate\").innerHTML = \"Disconnected\";\n  }\n    this.setState({\n        date: new Date()\n    })\n}\n      render = () => {\n        if (this.state.isToggleOn == true){\n          return (\n          <>\n          <Button id = \"toggle\" style= {{textAlign:'center'}} type = 'primary' onClick={this.handleClick}>\n                  {this.state.isToggleOn ? 'ON' : 'OFF'}\n          </Button>\n          <br></br>\n          <Line {...config} />\n          <br></br>\n          </>);\n        } else if (this.state.isToggleOn == false){\n          document.getElementById(\"resRate\").innerHTML = \"Disconnected\";\n          // data = [];\n          return (\n          <>\n          \n          <Button id = \"toggle\" style= {{textAlign:'center'}} type = 'secondary' onClick={this.handleClick}>\n                  {this.state.isToggleOn ? 'ON' : 'OFF'}\n          </Button> \n          <br></br>\n          <Line {...config} />\n          <br></br>\n          \n          </>);\n        }\n        \n      }\n       \n};\n\n\n\nexport default Plot;"]},"metadata":{},"sourceType":"module"}