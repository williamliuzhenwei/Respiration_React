{"ast":null,"code":"import _possibleConstructorReturn from \"/Users/liuzhenwei/Desktop/Respiration_React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _inherits from \"/Users/liuzhenwei/Desktop/Respiration_React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/liuzhenwei/Desktop/Respiration_React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _classCallCheck from \"/Users/liuzhenwei/Desktop/Respiration_React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/liuzhenwei/Desktop/Respiration_React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport rescale from 'ml-array-rescale';\nimport { inspectMatrix, inspectMatrixWithOptions } from './inspect';\nimport { installMathOperations } from './mathOperations';\nimport { sumByRow, sumByColumn, sumAll, productByRow, productByColumn, productAll, varianceByRow, varianceByColumn, varianceAll, centerByRow, centerByColumn, centerAll, scaleByRow, scaleByColumn, scaleAll, getScaleByRow, getScaleByColumn, getScaleAll } from './stat';\nimport { checkRowVector, checkRowIndex, checkColumnIndex, checkColumnVector, checkRange, checkIndices, checkNonEmpty } from './util';\nexport var AbstractMatrix = /*#__PURE__*/function () {\n  function AbstractMatrix() {\n    _classCallCheck(this, AbstractMatrix);\n  }\n\n  _createClass(AbstractMatrix, [{\n    key: \"size\",\n    get: function get() {\n      return this.rows * this.columns;\n    }\n  }, {\n    key: \"apply\",\n    value: function apply(callback) {\n      if (typeof callback !== 'function') {\n        throw new TypeError('callback must be a function');\n      }\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          callback.call(this, i, j);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"to1DArray\",\n    value: function to1DArray() {\n      var array = [];\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          array.push(this.get(i, j));\n        }\n      }\n\n      return array;\n    }\n  }, {\n    key: \"to2DArray\",\n    value: function to2DArray() {\n      var copy = [];\n\n      for (var i = 0; i < this.rows; i++) {\n        copy.push([]);\n\n        for (var j = 0; j < this.columns; j++) {\n          copy[i].push(this.get(i, j));\n        }\n      }\n\n      return copy;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.to2DArray();\n    }\n  }, {\n    key: \"isRowVector\",\n    value: function isRowVector() {\n      return this.rows === 1;\n    }\n  }, {\n    key: \"isColumnVector\",\n    value: function isColumnVector() {\n      return this.columns === 1;\n    }\n  }, {\n    key: \"isVector\",\n    value: function isVector() {\n      return this.rows === 1 || this.columns === 1;\n    }\n  }, {\n    key: \"isSquare\",\n    value: function isSquare() {\n      return this.rows === this.columns;\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this.rows === 0 || this.columns === 0;\n    }\n  }, {\n    key: \"isSymmetric\",\n    value: function isSymmetric() {\n      if (this.isSquare()) {\n        for (var i = 0; i < this.rows; i++) {\n          for (var j = 0; j <= i; j++) {\n            if (this.get(i, j) !== this.get(j, i)) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isEchelonForm\",\n    value: function isEchelonForm() {\n      var i = 0;\n      var j = 0;\n      var previousColumn = -1;\n      var isEchelonForm = true;\n      var checked = false;\n\n      while (i < this.rows && isEchelonForm) {\n        j = 0;\n        checked = false;\n\n        while (j < this.columns && checked === false) {\n          if (this.get(i, j) === 0) {\n            j++;\n          } else if (this.get(i, j) === 1 && j > previousColumn) {\n            checked = true;\n            previousColumn = j;\n          } else {\n            isEchelonForm = false;\n            checked = true;\n          }\n        }\n\n        i++;\n      }\n\n      return isEchelonForm;\n    }\n  }, {\n    key: \"isReducedEchelonForm\",\n    value: function isReducedEchelonForm() {\n      var i = 0;\n      var j = 0;\n      var previousColumn = -1;\n      var isReducedEchelonForm = true;\n      var checked = false;\n\n      while (i < this.rows && isReducedEchelonForm) {\n        j = 0;\n        checked = false;\n\n        while (j < this.columns && checked === false) {\n          if (this.get(i, j) === 0) {\n            j++;\n          } else if (this.get(i, j) === 1 && j > previousColumn) {\n            checked = true;\n            previousColumn = j;\n          } else {\n            isReducedEchelonForm = false;\n            checked = true;\n          }\n        }\n\n        for (var k = j + 1; k < this.rows; k++) {\n          if (this.get(i, k) !== 0) {\n            isReducedEchelonForm = false;\n          }\n        }\n\n        i++;\n      }\n\n      return isReducedEchelonForm;\n    }\n  }, {\n    key: \"echelonForm\",\n    value: function echelonForm() {\n      var result = this.clone();\n      var h = 0;\n      var k = 0;\n\n      while (h < result.rows && k < result.columns) {\n        var iMax = h;\n\n        for (var i = h; i < result.rows; i++) {\n          if (result.get(i, k) > result.get(iMax, k)) {\n            iMax = i;\n          }\n        }\n\n        if (result.get(iMax, k) === 0) {\n          k++;\n        } else {\n          result.swapRows(h, iMax);\n          var tmp = result.get(h, k);\n\n          for (var j = k; j < result.columns; j++) {\n            result.set(h, j, result.get(h, j) / tmp);\n          }\n\n          for (var _i = h + 1; _i < result.rows; _i++) {\n            var factor = result.get(_i, k) / result.get(h, k);\n            result.set(_i, k, 0);\n\n            for (var _j = k + 1; _j < result.columns; _j++) {\n              result.set(_i, _j, result.get(_i, _j) - result.get(h, _j) * factor);\n            }\n          }\n\n          h++;\n          k++;\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"reducedEchelonForm\",\n    value: function reducedEchelonForm() {\n      var result = this.echelonForm();\n      var m = result.columns;\n      var n = result.rows;\n      var h = n - 1;\n\n      while (h >= 0) {\n        if (result.maxRow(h) === 0) {\n          h--;\n        } else {\n          var p = 0;\n          var pivot = false;\n\n          while (p < n && pivot === false) {\n            if (result.get(h, p) === 1) {\n              pivot = true;\n            } else {\n              p++;\n            }\n          }\n\n          for (var i = 0; i < h; i++) {\n            var factor = result.get(i, p);\n\n            for (var j = p; j < m; j++) {\n              var tmp = result.get(i, j) - factor * result.get(h, j);\n              result.set(i, j, tmp);\n            }\n          }\n\n          h--;\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"set\",\n    value: function set() {\n      throw new Error('set method is unimplemented');\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      throw new Error('get method is unimplemented');\n    }\n  }, {\n    key: \"repeat\",\n    value: function repeat() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (typeof options !== 'object') {\n        throw new TypeError('options must be an object');\n      }\n\n      var _options$rows = options.rows,\n          rows = _options$rows === void 0 ? 1 : _options$rows,\n          _options$columns = options.columns,\n          columns = _options$columns === void 0 ? 1 : _options$columns;\n\n      if (!Number.isInteger(rows) || rows <= 0) {\n        throw new TypeError('rows must be a positive integer');\n      }\n\n      if (!Number.isInteger(columns) || columns <= 0) {\n        throw new TypeError('columns must be a positive integer');\n      }\n\n      var matrix = new Matrix(this.rows * rows, this.columns * columns);\n\n      for (var i = 0; i < rows; i++) {\n        for (var j = 0; j < columns; j++) {\n          matrix.setSubMatrix(this, this.rows * i, this.columns * j);\n        }\n      }\n\n      return matrix;\n    }\n  }, {\n    key: \"fill\",\n    value: function fill(value) {\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          this.set(i, j, value);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"neg\",\n    value: function neg() {\n      return this.mulS(-1);\n    }\n  }, {\n    key: \"getRow\",\n    value: function getRow(index) {\n      checkRowIndex(this, index);\n      var row = [];\n\n      for (var i = 0; i < this.columns; i++) {\n        row.push(this.get(index, i));\n      }\n\n      return row;\n    }\n  }, {\n    key: \"getRowVector\",\n    value: function getRowVector(index) {\n      return Matrix.rowVector(this.getRow(index));\n    }\n  }, {\n    key: \"setRow\",\n    value: function setRow(index, array) {\n      checkRowIndex(this, index);\n      array = checkRowVector(this, array);\n\n      for (var i = 0; i < this.columns; i++) {\n        this.set(index, i, array[i]);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"swapRows\",\n    value: function swapRows(row1, row2) {\n      checkRowIndex(this, row1);\n      checkRowIndex(this, row2);\n\n      for (var i = 0; i < this.columns; i++) {\n        var temp = this.get(row1, i);\n        this.set(row1, i, this.get(row2, i));\n        this.set(row2, i, temp);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getColumn\",\n    value: function getColumn(index) {\n      checkColumnIndex(this, index);\n      var column = [];\n\n      for (var i = 0; i < this.rows; i++) {\n        column.push(this.get(i, index));\n      }\n\n      return column;\n    }\n  }, {\n    key: \"getColumnVector\",\n    value: function getColumnVector(index) {\n      return Matrix.columnVector(this.getColumn(index));\n    }\n  }, {\n    key: \"setColumn\",\n    value: function setColumn(index, array) {\n      checkColumnIndex(this, index);\n      array = checkColumnVector(this, array);\n\n      for (var i = 0; i < this.rows; i++) {\n        this.set(i, index, array[i]);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"swapColumns\",\n    value: function swapColumns(column1, column2) {\n      checkColumnIndex(this, column1);\n      checkColumnIndex(this, column2);\n\n      for (var i = 0; i < this.rows; i++) {\n        var temp = this.get(i, column1);\n        this.set(i, column1, this.get(i, column2));\n        this.set(i, column2, temp);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"addRowVector\",\n    value: function addRowVector(vector) {\n      vector = checkRowVector(this, vector);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          this.set(i, j, this.get(i, j) + vector[j]);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"subRowVector\",\n    value: function subRowVector(vector) {\n      vector = checkRowVector(this, vector);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          this.set(i, j, this.get(i, j) - vector[j]);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"mulRowVector\",\n    value: function mulRowVector(vector) {\n      vector = checkRowVector(this, vector);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          this.set(i, j, this.get(i, j) * vector[j]);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"divRowVector\",\n    value: function divRowVector(vector) {\n      vector = checkRowVector(this, vector);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          this.set(i, j, this.get(i, j) / vector[j]);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"addColumnVector\",\n    value: function addColumnVector(vector) {\n      vector = checkColumnVector(this, vector);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          this.set(i, j, this.get(i, j) + vector[i]);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"subColumnVector\",\n    value: function subColumnVector(vector) {\n      vector = checkColumnVector(this, vector);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          this.set(i, j, this.get(i, j) - vector[i]);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"mulColumnVector\",\n    value: function mulColumnVector(vector) {\n      vector = checkColumnVector(this, vector);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          this.set(i, j, this.get(i, j) * vector[i]);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"divColumnVector\",\n    value: function divColumnVector(vector) {\n      vector = checkColumnVector(this, vector);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          this.set(i, j, this.get(i, j) / vector[i]);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"mulRow\",\n    value: function mulRow(index, value) {\n      checkRowIndex(this, index);\n\n      for (var i = 0; i < this.columns; i++) {\n        this.set(index, i, this.get(index, i) * value);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"mulColumn\",\n    value: function mulColumn(index, value) {\n      checkColumnIndex(this, index);\n\n      for (var i = 0; i < this.rows; i++) {\n        this.set(i, index, this.get(i, index) * value);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"max\",\n    value: function max() {\n      if (this.isEmpty()) {\n        return NaN;\n      }\n\n      var v = this.get(0, 0);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          if (this.get(i, j) > v) {\n            v = this.get(i, j);\n          }\n        }\n      }\n\n      return v;\n    }\n  }, {\n    key: \"maxIndex\",\n    value: function maxIndex() {\n      checkNonEmpty(this);\n      var v = this.get(0, 0);\n      var idx = [0, 0];\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          if (this.get(i, j) > v) {\n            v = this.get(i, j);\n            idx[0] = i;\n            idx[1] = j;\n          }\n        }\n      }\n\n      return idx;\n    }\n  }, {\n    key: \"min\",\n    value: function min() {\n      if (this.isEmpty()) {\n        return NaN;\n      }\n\n      var v = this.get(0, 0);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          if (this.get(i, j) < v) {\n            v = this.get(i, j);\n          }\n        }\n      }\n\n      return v;\n    }\n  }, {\n    key: \"minIndex\",\n    value: function minIndex() {\n      checkNonEmpty(this);\n      var v = this.get(0, 0);\n      var idx = [0, 0];\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          if (this.get(i, j) < v) {\n            v = this.get(i, j);\n            idx[0] = i;\n            idx[1] = j;\n          }\n        }\n      }\n\n      return idx;\n    }\n  }, {\n    key: \"maxRow\",\n    value: function maxRow(row) {\n      checkRowIndex(this, row);\n\n      if (this.isEmpty()) {\n        return NaN;\n      }\n\n      var v = this.get(row, 0);\n\n      for (var i = 1; i < this.columns; i++) {\n        if (this.get(row, i) > v) {\n          v = this.get(row, i);\n        }\n      }\n\n      return v;\n    }\n  }, {\n    key: \"maxRowIndex\",\n    value: function maxRowIndex(row) {\n      checkRowIndex(this, row);\n      checkNonEmpty(this);\n      var v = this.get(row, 0);\n      var idx = [row, 0];\n\n      for (var i = 1; i < this.columns; i++) {\n        if (this.get(row, i) > v) {\n          v = this.get(row, i);\n          idx[1] = i;\n        }\n      }\n\n      return idx;\n    }\n  }, {\n    key: \"minRow\",\n    value: function minRow(row) {\n      checkRowIndex(this, row);\n\n      if (this.isEmpty()) {\n        return NaN;\n      }\n\n      var v = this.get(row, 0);\n\n      for (var i = 1; i < this.columns; i++) {\n        if (this.get(row, i) < v) {\n          v = this.get(row, i);\n        }\n      }\n\n      return v;\n    }\n  }, {\n    key: \"minRowIndex\",\n    value: function minRowIndex(row) {\n      checkRowIndex(this, row);\n      checkNonEmpty(this);\n      var v = this.get(row, 0);\n      var idx = [row, 0];\n\n      for (var i = 1; i < this.columns; i++) {\n        if (this.get(row, i) < v) {\n          v = this.get(row, i);\n          idx[1] = i;\n        }\n      }\n\n      return idx;\n    }\n  }, {\n    key: \"maxColumn\",\n    value: function maxColumn(column) {\n      checkColumnIndex(this, column);\n\n      if (this.isEmpty()) {\n        return NaN;\n      }\n\n      var v = this.get(0, column);\n\n      for (var i = 1; i < this.rows; i++) {\n        if (this.get(i, column) > v) {\n          v = this.get(i, column);\n        }\n      }\n\n      return v;\n    }\n  }, {\n    key: \"maxColumnIndex\",\n    value: function maxColumnIndex(column) {\n      checkColumnIndex(this, column);\n      checkNonEmpty(this);\n      var v = this.get(0, column);\n      var idx = [0, column];\n\n      for (var i = 1; i < this.rows; i++) {\n        if (this.get(i, column) > v) {\n          v = this.get(i, column);\n          idx[0] = i;\n        }\n      }\n\n      return idx;\n    }\n  }, {\n    key: \"minColumn\",\n    value: function minColumn(column) {\n      checkColumnIndex(this, column);\n\n      if (this.isEmpty()) {\n        return NaN;\n      }\n\n      var v = this.get(0, column);\n\n      for (var i = 1; i < this.rows; i++) {\n        if (this.get(i, column) < v) {\n          v = this.get(i, column);\n        }\n      }\n\n      return v;\n    }\n  }, {\n    key: \"minColumnIndex\",\n    value: function minColumnIndex(column) {\n      checkColumnIndex(this, column);\n      checkNonEmpty(this);\n      var v = this.get(0, column);\n      var idx = [0, column];\n\n      for (var i = 1; i < this.rows; i++) {\n        if (this.get(i, column) < v) {\n          v = this.get(i, column);\n          idx[0] = i;\n        }\n      }\n\n      return idx;\n    }\n  }, {\n    key: \"diag\",\n    value: function diag() {\n      var min = Math.min(this.rows, this.columns);\n      var diag = [];\n\n      for (var i = 0; i < min; i++) {\n        diag.push(this.get(i, i));\n      }\n\n      return diag;\n    }\n  }, {\n    key: \"norm\",\n    value: function norm() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'frobenius';\n      var result = 0;\n\n      if (type === 'max') {\n        return this.max();\n      } else if (type === 'frobenius') {\n        for (var i = 0; i < this.rows; i++) {\n          for (var j = 0; j < this.columns; j++) {\n            result = result + this.get(i, j) * this.get(i, j);\n          }\n        }\n\n        return Math.sqrt(result);\n      } else {\n        throw new RangeError(\"unknown norm type: \".concat(type));\n      }\n    }\n  }, {\n    key: \"cumulativeSum\",\n    value: function cumulativeSum() {\n      var sum = 0;\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          sum += this.get(i, j);\n          this.set(i, j, sum);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(vector2) {\n      if (AbstractMatrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\n      var vector1 = this.to1DArray();\n\n      if (vector1.length !== vector2.length) {\n        throw new RangeError('vectors do not have the same size');\n      }\n\n      var dot = 0;\n\n      for (var i = 0; i < vector1.length; i++) {\n        dot += vector1[i] * vector2[i];\n      }\n\n      return dot;\n    }\n  }, {\n    key: \"mmul\",\n    value: function mmul(other) {\n      other = Matrix.checkMatrix(other);\n      var m = this.rows;\n      var n = this.columns;\n      var p = other.columns;\n      var result = new Matrix(m, p);\n      var Bcolj = new Float64Array(n);\n\n      for (var j = 0; j < p; j++) {\n        for (var k = 0; k < n; k++) {\n          Bcolj[k] = other.get(k, j);\n        }\n\n        for (var i = 0; i < m; i++) {\n          var s = 0;\n\n          for (var _k = 0; _k < n; _k++) {\n            s += this.get(i, _k) * Bcolj[_k];\n          }\n\n          result.set(i, j, s);\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"strassen2x2\",\n    value: function strassen2x2(other) {\n      other = Matrix.checkMatrix(other);\n      var result = new Matrix(2, 2);\n      var a11 = this.get(0, 0);\n      var b11 = other.get(0, 0);\n      var a12 = this.get(0, 1);\n      var b12 = other.get(0, 1);\n      var a21 = this.get(1, 0);\n      var b21 = other.get(1, 0);\n      var a22 = this.get(1, 1);\n      var b22 = other.get(1, 1); // Compute intermediate values.\n\n      var m1 = (a11 + a22) * (b11 + b22);\n      var m2 = (a21 + a22) * b11;\n      var m3 = a11 * (b12 - b22);\n      var m4 = a22 * (b21 - b11);\n      var m5 = (a11 + a12) * b22;\n      var m6 = (a21 - a11) * (b11 + b12);\n      var m7 = (a12 - a22) * (b21 + b22); // Combine intermediate values into the output.\n\n      var c00 = m1 + m4 - m5 + m7;\n      var c01 = m3 + m5;\n      var c10 = m2 + m4;\n      var c11 = m1 - m2 + m3 + m6;\n      result.set(0, 0, c00);\n      result.set(0, 1, c01);\n      result.set(1, 0, c10);\n      result.set(1, 1, c11);\n      return result;\n    }\n  }, {\n    key: \"strassen3x3\",\n    value: function strassen3x3(other) {\n      other = Matrix.checkMatrix(other);\n      var result = new Matrix(3, 3);\n      var a00 = this.get(0, 0);\n      var a01 = this.get(0, 1);\n      var a02 = this.get(0, 2);\n      var a10 = this.get(1, 0);\n      var a11 = this.get(1, 1);\n      var a12 = this.get(1, 2);\n      var a20 = this.get(2, 0);\n      var a21 = this.get(2, 1);\n      var a22 = this.get(2, 2);\n      var b00 = other.get(0, 0);\n      var b01 = other.get(0, 1);\n      var b02 = other.get(0, 2);\n      var b10 = other.get(1, 0);\n      var b11 = other.get(1, 1);\n      var b12 = other.get(1, 2);\n      var b20 = other.get(2, 0);\n      var b21 = other.get(2, 1);\n      var b22 = other.get(2, 2);\n      var m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\n      var m2 = (a00 - a10) * (-b01 + b11);\n      var m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\n      var m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\n      var m5 = (a10 + a11) * (-b00 + b01);\n      var m6 = a00 * b00;\n      var m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\n      var m8 = (-a00 + a20) * (b02 - b12);\n      var m9 = (a20 + a21) * (-b00 + b02);\n      var m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\n      var m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\n      var m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\n      var m13 = (a02 - a22) * (b11 - b21);\n      var m14 = a02 * b20;\n      var m15 = (a21 + a22) * (-b20 + b21);\n      var m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\n      var m17 = (a02 - a12) * (b12 - b22);\n      var m18 = (a11 + a12) * (-b20 + b22);\n      var m19 = a01 * b10;\n      var m20 = a12 * b21;\n      var m21 = a10 * b02;\n      var m22 = a20 * b01;\n      var m23 = a22 * b22;\n      var c00 = m6 + m14 + m19;\n      var c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\n      var c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\n      var c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\n      var c11 = m2 + m4 + m5 + m6 + m20;\n      var c12 = m14 + m16 + m17 + m18 + m21;\n      var c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\n      var c21 = m12 + m13 + m14 + m15 + m22;\n      var c22 = m6 + m7 + m8 + m9 + m23;\n      result.set(0, 0, c00);\n      result.set(0, 1, c01);\n      result.set(0, 2, c02);\n      result.set(1, 0, c10);\n      result.set(1, 1, c11);\n      result.set(1, 2, c12);\n      result.set(2, 0, c20);\n      result.set(2, 1, c21);\n      result.set(2, 2, c22);\n      return result;\n    }\n  }, {\n    key: \"mmulStrassen\",\n    value: function mmulStrassen(y) {\n      y = Matrix.checkMatrix(y);\n      var x = this.clone();\n      var r1 = x.rows;\n      var c1 = x.columns;\n      var r2 = y.rows;\n      var c2 = y.columns;\n\n      if (c1 !== r2) {\n        // eslint-disable-next-line no-console\n        console.warn(\"Multiplying \".concat(r1, \" x \").concat(c1, \" and \").concat(r2, \" x \").concat(c2, \" matrix: dimensions do not match.\"));\n      } // Put a matrix into the top left of a matrix of zeros.\n      // `rows` and `cols` are the dimensions of the output matrix.\n\n\n      function embed(mat, rows, cols) {\n        var r = mat.rows;\n        var c = mat.columns;\n\n        if (r === rows && c === cols) {\n          return mat;\n        } else {\n          var resultat = AbstractMatrix.zeros(rows, cols);\n          resultat = resultat.setSubMatrix(mat, 0, 0);\n          return resultat;\n        }\n      } // Make sure both matrices are the same size.\n      // This is exclusively for simplicity:\n      // this algorithm can be implemented with matrices of different sizes.\n\n\n      var r = Math.max(r1, r2);\n      var c = Math.max(c1, c2);\n      x = embed(x, r, c);\n      y = embed(y, r, c); // Our recursive multiplication function.\n\n      function blockMult(a, b, rows, cols) {\n        // For small matrices, resort to naive multiplication.\n        if (rows <= 512 || cols <= 512) {\n          return a.mmul(b); // a is equivalent to this\n        } // Apply dynamic padding.\n\n\n        if (rows % 2 === 1 && cols % 2 === 1) {\n          a = embed(a, rows + 1, cols + 1);\n          b = embed(b, rows + 1, cols + 1);\n        } else if (rows % 2 === 1) {\n          a = embed(a, rows + 1, cols);\n          b = embed(b, rows + 1, cols);\n        } else if (cols % 2 === 1) {\n          a = embed(a, rows, cols + 1);\n          b = embed(b, rows, cols + 1);\n        }\n\n        var halfRows = parseInt(a.rows / 2, 10);\n        var halfCols = parseInt(a.columns / 2, 10); // Subdivide input matrices.\n\n        var a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n        var b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n        var a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\n        var b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\n        var a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\n        var b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\n        var a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\n        var b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1); // Compute intermediate values.\n\n        var m1 = blockMult(AbstractMatrix.add(a11, a22), AbstractMatrix.add(b11, b22), halfRows, halfCols);\n        var m2 = blockMult(AbstractMatrix.add(a21, a22), b11, halfRows, halfCols);\n        var m3 = blockMult(a11, AbstractMatrix.sub(b12, b22), halfRows, halfCols);\n        var m4 = blockMult(a22, AbstractMatrix.sub(b21, b11), halfRows, halfCols);\n        var m5 = blockMult(AbstractMatrix.add(a11, a12), b22, halfRows, halfCols);\n        var m6 = blockMult(AbstractMatrix.sub(a21, a11), AbstractMatrix.add(b11, b12), halfRows, halfCols);\n        var m7 = blockMult(AbstractMatrix.sub(a12, a22), AbstractMatrix.add(b21, b22), halfRows, halfCols); // Combine intermediate values into the output.\n\n        var c11 = AbstractMatrix.add(m1, m4);\n        c11.sub(m5);\n        c11.add(m7);\n        var c12 = AbstractMatrix.add(m3, m5);\n        var c21 = AbstractMatrix.add(m2, m4);\n        var c22 = AbstractMatrix.sub(m1, m2);\n        c22.add(m3);\n        c22.add(m6); // Crop output to the desired size (undo dynamic padding).\n\n        var resultat = AbstractMatrix.zeros(2 * c11.rows, 2 * c11.columns);\n        resultat = resultat.setSubMatrix(c11, 0, 0);\n        resultat = resultat.setSubMatrix(c12, c11.rows, 0);\n        resultat = resultat.setSubMatrix(c21, 0, c11.columns);\n        resultat = resultat.setSubMatrix(c22, c11.rows, c11.columns);\n        return resultat.subMatrix(0, rows - 1, 0, cols - 1);\n      }\n\n      return blockMult(x, y, r, c);\n    }\n  }, {\n    key: \"scaleRows\",\n    value: function scaleRows() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (typeof options !== 'object') {\n        throw new TypeError('options must be an object');\n      }\n\n      var _options$min = options.min,\n          min = _options$min === void 0 ? 0 : _options$min,\n          _options$max = options.max,\n          max = _options$max === void 0 ? 1 : _options$max;\n      if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n      if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n      if (min >= max) throw new RangeError('min must be smaller than max');\n      var newMatrix = new Matrix(this.rows, this.columns);\n\n      for (var i = 0; i < this.rows; i++) {\n        var row = this.getRow(i);\n\n        if (row.length > 0) {\n          rescale(row, {\n            min: min,\n            max: max,\n            output: row\n          });\n        }\n\n        newMatrix.setRow(i, row);\n      }\n\n      return newMatrix;\n    }\n  }, {\n    key: \"scaleColumns\",\n    value: function scaleColumns() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (typeof options !== 'object') {\n        throw new TypeError('options must be an object');\n      }\n\n      var _options$min2 = options.min,\n          min = _options$min2 === void 0 ? 0 : _options$min2,\n          _options$max2 = options.max,\n          max = _options$max2 === void 0 ? 1 : _options$max2;\n      if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n      if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n      if (min >= max) throw new RangeError('min must be smaller than max');\n      var newMatrix = new Matrix(this.rows, this.columns);\n\n      for (var i = 0; i < this.columns; i++) {\n        var column = this.getColumn(i);\n\n        if (column.length) {\n          rescale(column, {\n            min: min,\n            max: max,\n            output: column\n          });\n        }\n\n        newMatrix.setColumn(i, column);\n      }\n\n      return newMatrix;\n    }\n  }, {\n    key: \"flipRows\",\n    value: function flipRows() {\n      var middle = Math.ceil(this.columns / 2);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < middle; j++) {\n          var first = this.get(i, j);\n          var last = this.get(i, this.columns - 1 - j);\n          this.set(i, j, last);\n          this.set(i, this.columns - 1 - j, first);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"flipColumns\",\n    value: function flipColumns() {\n      var middle = Math.ceil(this.rows / 2);\n\n      for (var j = 0; j < this.columns; j++) {\n        for (var i = 0; i < middle; i++) {\n          var first = this.get(i, j);\n          var last = this.get(this.rows - 1 - i, j);\n          this.set(i, j, last);\n          this.set(this.rows - 1 - i, j, first);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"kroneckerProduct\",\n    value: function kroneckerProduct(other) {\n      other = Matrix.checkMatrix(other);\n      var m = this.rows;\n      var n = this.columns;\n      var p = other.rows;\n      var q = other.columns;\n      var result = new Matrix(m * p, n * q);\n\n      for (var i = 0; i < m; i++) {\n        for (var j = 0; j < n; j++) {\n          for (var k = 0; k < p; k++) {\n            for (var l = 0; l < q; l++) {\n              result.set(p * i + k, q * j + l, this.get(i, j) * other.get(k, l));\n            }\n          }\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"kroneckerSum\",\n    value: function kroneckerSum(other) {\n      other = Matrix.checkMatrix(other);\n\n      if (!this.isSquare() || !other.isSquare()) {\n        throw new Error('Kronecker Sum needs two Square Matrices');\n      }\n\n      var m = this.rows;\n      var n = other.rows;\n      var AxI = this.kroneckerProduct(Matrix.eye(n, n));\n      var IxB = Matrix.eye(m, m).kroneckerProduct(other);\n      return AxI.add(IxB);\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      var result = new Matrix(this.columns, this.rows);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n          result.set(j, i, this.get(i, j));\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"sortRows\",\n    value: function sortRows() {\n      var compareFunction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : compareNumbers;\n\n      for (var i = 0; i < this.rows; i++) {\n        this.setRow(i, this.getRow(i).sort(compareFunction));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"sortColumns\",\n    value: function sortColumns() {\n      var compareFunction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : compareNumbers;\n\n      for (var i = 0; i < this.columns; i++) {\n        this.setColumn(i, this.getColumn(i).sort(compareFunction));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"subMatrix\",\n    value: function subMatrix(startRow, endRow, startColumn, endColumn) {\n      checkRange(this, startRow, endRow, startColumn, endColumn);\n      var newMatrix = new Matrix(endRow - startRow + 1, endColumn - startColumn + 1);\n\n      for (var i = startRow; i <= endRow; i++) {\n        for (var j = startColumn; j <= endColumn; j++) {\n          newMatrix.set(i - startRow, j - startColumn, this.get(i, j));\n        }\n      }\n\n      return newMatrix;\n    }\n  }, {\n    key: \"subMatrixRow\",\n    value: function subMatrixRow(indices, startColumn, endColumn) {\n      if (startColumn === undefined) startColumn = 0;\n      if (endColumn === undefined) endColumn = this.columns - 1;\n\n      if (startColumn > endColumn || startColumn < 0 || startColumn >= this.columns || endColumn < 0 || endColumn >= this.columns) {\n        throw new RangeError('Argument out of range');\n      }\n\n      var newMatrix = new Matrix(indices.length, endColumn - startColumn + 1);\n\n      for (var i = 0; i < indices.length; i++) {\n        for (var j = startColumn; j <= endColumn; j++) {\n          if (indices[i] < 0 || indices[i] >= this.rows) {\n            throw new RangeError(\"Row index out of range: \".concat(indices[i]));\n          }\n\n          newMatrix.set(i, j - startColumn, this.get(indices[i], j));\n        }\n      }\n\n      return newMatrix;\n    }\n  }, {\n    key: \"subMatrixColumn\",\n    value: function subMatrixColumn(indices, startRow, endRow) {\n      if (startRow === undefined) startRow = 0;\n      if (endRow === undefined) endRow = this.rows - 1;\n\n      if (startRow > endRow || startRow < 0 || startRow >= this.rows || endRow < 0 || endRow >= this.rows) {\n        throw new RangeError('Argument out of range');\n      }\n\n      var newMatrix = new Matrix(endRow - startRow + 1, indices.length);\n\n      for (var i = 0; i < indices.length; i++) {\n        for (var j = startRow; j <= endRow; j++) {\n          if (indices[i] < 0 || indices[i] >= this.columns) {\n            throw new RangeError(\"Column index out of range: \".concat(indices[i]));\n          }\n\n          newMatrix.set(j - startRow, i, this.get(j, indices[i]));\n        }\n      }\n\n      return newMatrix;\n    }\n  }, {\n    key: \"setSubMatrix\",\n    value: function setSubMatrix(matrix, startRow, startColumn) {\n      matrix = Matrix.checkMatrix(matrix);\n\n      if (matrix.isEmpty()) {\n        return this;\n      }\n\n      var endRow = startRow + matrix.rows - 1;\n      var endColumn = startColumn + matrix.columns - 1;\n      checkRange(this, startRow, endRow, startColumn, endColumn);\n\n      for (var i = 0; i < matrix.rows; i++) {\n        for (var j = 0; j < matrix.columns; j++) {\n          this.set(startRow + i, startColumn + j, matrix.get(i, j));\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"selection\",\n    value: function selection(rowIndices, columnIndices) {\n      var indices = checkIndices(this, rowIndices, columnIndices);\n      var newMatrix = new Matrix(rowIndices.length, columnIndices.length);\n\n      for (var i = 0; i < indices.row.length; i++) {\n        var rowIndex = indices.row[i];\n\n        for (var j = 0; j < indices.column.length; j++) {\n          var columnIndex = indices.column[j];\n          newMatrix.set(i, j, this.get(rowIndex, columnIndex));\n        }\n      }\n\n      return newMatrix;\n    }\n  }, {\n    key: \"trace\",\n    value: function trace() {\n      var min = Math.min(this.rows, this.columns);\n      var trace = 0;\n\n      for (var i = 0; i < min; i++) {\n        trace += this.get(i, i);\n      }\n\n      return trace;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var newMatrix = new Matrix(this.rows, this.columns);\n\n      for (var row = 0; row < this.rows; row++) {\n        for (var column = 0; column < this.columns; column++) {\n          newMatrix.set(row, column, this.get(row, column));\n        }\n      }\n\n      return newMatrix;\n    }\n  }, {\n    key: \"sum\",\n    value: function sum(by) {\n      switch (by) {\n        case 'row':\n          return sumByRow(this);\n\n        case 'column':\n          return sumByColumn(this);\n\n        case undefined:\n          return sumAll(this);\n\n        default:\n          throw new Error(\"invalid option: \".concat(by));\n      }\n    }\n  }, {\n    key: \"product\",\n    value: function product(by) {\n      switch (by) {\n        case 'row':\n          return productByRow(this);\n\n        case 'column':\n          return productByColumn(this);\n\n        case undefined:\n          return productAll(this);\n\n        default:\n          throw new Error(\"invalid option: \".concat(by));\n      }\n    }\n  }, {\n    key: \"mean\",\n    value: function mean(by) {\n      var sum = this.sum(by);\n\n      switch (by) {\n        case 'row':\n          {\n            for (var i = 0; i < this.rows; i++) {\n              sum[i] /= this.columns;\n            }\n\n            return sum;\n          }\n\n        case 'column':\n          {\n            for (var _i2 = 0; _i2 < this.columns; _i2++) {\n              sum[_i2] /= this.rows;\n            }\n\n            return sum;\n          }\n\n        case undefined:\n          return sum / this.size;\n\n        default:\n          throw new Error(\"invalid option: \".concat(by));\n      }\n    }\n  }, {\n    key: \"variance\",\n    value: function variance(by) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (typeof by === 'object') {\n        options = by;\n        by = undefined;\n      }\n\n      if (typeof options !== 'object') {\n        throw new TypeError('options must be an object');\n      }\n\n      var _options = options,\n          _options$unbiased = _options.unbiased,\n          unbiased = _options$unbiased === void 0 ? true : _options$unbiased,\n          _options$mean = _options.mean,\n          mean = _options$mean === void 0 ? this.mean(by) : _options$mean;\n\n      if (typeof unbiased !== 'boolean') {\n        throw new TypeError('unbiased must be a boolean');\n      }\n\n      switch (by) {\n        case 'row':\n          {\n            if (!Array.isArray(mean)) {\n              throw new TypeError('mean must be an array');\n            }\n\n            return varianceByRow(this, unbiased, mean);\n          }\n\n        case 'column':\n          {\n            if (!Array.isArray(mean)) {\n              throw new TypeError('mean must be an array');\n            }\n\n            return varianceByColumn(this, unbiased, mean);\n          }\n\n        case undefined:\n          {\n            if (typeof mean !== 'number') {\n              throw new TypeError('mean must be a number');\n            }\n\n            return varianceAll(this, unbiased, mean);\n          }\n\n        default:\n          throw new Error(\"invalid option: \".concat(by));\n      }\n    }\n  }, {\n    key: \"standardDeviation\",\n    value: function standardDeviation(by, options) {\n      if (typeof by === 'object') {\n        options = by;\n        by = undefined;\n      }\n\n      var variance = this.variance(by, options);\n\n      if (by === undefined) {\n        return Math.sqrt(variance);\n      } else {\n        for (var i = 0; i < variance.length; i++) {\n          variance[i] = Math.sqrt(variance[i]);\n        }\n\n        return variance;\n      }\n    }\n  }, {\n    key: \"center\",\n    value: function center(by) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (typeof by === 'object') {\n        options = by;\n        by = undefined;\n      }\n\n      if (typeof options !== 'object') {\n        throw new TypeError('options must be an object');\n      }\n\n      var _options2 = options,\n          _options2$center = _options2.center,\n          center = _options2$center === void 0 ? this.mean(by) : _options2$center;\n\n      switch (by) {\n        case 'row':\n          {\n            if (!Array.isArray(center)) {\n              throw new TypeError('center must be an array');\n            }\n\n            centerByRow(this, center);\n            return this;\n          }\n\n        case 'column':\n          {\n            if (!Array.isArray(center)) {\n              throw new TypeError('center must be an array');\n            }\n\n            centerByColumn(this, center);\n            return this;\n          }\n\n        case undefined:\n          {\n            if (typeof center !== 'number') {\n              throw new TypeError('center must be a number');\n            }\n\n            centerAll(this, center);\n            return this;\n          }\n\n        default:\n          throw new Error(\"invalid option: \".concat(by));\n      }\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(by) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (typeof by === 'object') {\n        options = by;\n        by = undefined;\n      }\n\n      if (typeof options !== 'object') {\n        throw new TypeError('options must be an object');\n      }\n\n      var scale = options.scale;\n\n      switch (by) {\n        case 'row':\n          {\n            if (scale === undefined) {\n              scale = getScaleByRow(this);\n            } else if (!Array.isArray(scale)) {\n              throw new TypeError('scale must be an array');\n            }\n\n            scaleByRow(this, scale);\n            return this;\n          }\n\n        case 'column':\n          {\n            if (scale === undefined) {\n              scale = getScaleByColumn(this);\n            } else if (!Array.isArray(scale)) {\n              throw new TypeError('scale must be an array');\n            }\n\n            scaleByColumn(this, scale);\n            return this;\n          }\n\n        case undefined:\n          {\n            if (scale === undefined) {\n              scale = getScaleAll(this);\n            } else if (typeof scale !== 'number') {\n              throw new TypeError('scale must be a number');\n            }\n\n            scaleAll(this, scale);\n            return this;\n          }\n\n        default:\n          throw new Error(\"invalid option: \".concat(by));\n      }\n    }\n  }, {\n    key: \"toString\",\n    value: function toString(options) {\n      return inspectMatrixWithOptions(this, options);\n    }\n  }], [{\n    key: \"from1DArray\",\n    value: function from1DArray(newRows, newColumns, newData) {\n      var length = newRows * newColumns;\n\n      if (length !== newData.length) {\n        throw new RangeError('data length does not match given dimensions');\n      }\n\n      var newMatrix = new Matrix(newRows, newColumns);\n\n      for (var row = 0; row < newRows; row++) {\n        for (var column = 0; column < newColumns; column++) {\n          newMatrix.set(row, column, newData[row * newColumns + column]);\n        }\n      }\n\n      return newMatrix;\n    }\n  }, {\n    key: \"rowVector\",\n    value: function rowVector(newData) {\n      var vector = new Matrix(1, newData.length);\n\n      for (var i = 0; i < newData.length; i++) {\n        vector.set(0, i, newData[i]);\n      }\n\n      return vector;\n    }\n  }, {\n    key: \"columnVector\",\n    value: function columnVector(newData) {\n      var vector = new Matrix(newData.length, 1);\n\n      for (var i = 0; i < newData.length; i++) {\n        vector.set(i, 0, newData[i]);\n      }\n\n      return vector;\n    }\n  }, {\n    key: \"zeros\",\n    value: function zeros(rows, columns) {\n      return new Matrix(rows, columns);\n    }\n  }, {\n    key: \"ones\",\n    value: function ones(rows, columns) {\n      return new Matrix(rows, columns).fill(1);\n    }\n  }, {\n    key: \"rand\",\n    value: function rand(rows, columns) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (typeof options !== 'object') {\n        throw new TypeError('options must be an object');\n      }\n\n      var _options$random = options.random,\n          random = _options$random === void 0 ? Math.random : _options$random;\n      var matrix = new Matrix(rows, columns);\n\n      for (var i = 0; i < rows; i++) {\n        for (var j = 0; j < columns; j++) {\n          matrix.set(i, j, random());\n        }\n      }\n\n      return matrix;\n    }\n  }, {\n    key: \"randInt\",\n    value: function randInt(rows, columns) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (typeof options !== 'object') {\n        throw new TypeError('options must be an object');\n      }\n\n      var _options$min3 = options.min,\n          min = _options$min3 === void 0 ? 0 : _options$min3,\n          _options$max3 = options.max,\n          max = _options$max3 === void 0 ? 1000 : _options$max3,\n          _options$random2 = options.random,\n          random = _options$random2 === void 0 ? Math.random : _options$random2;\n      if (!Number.isInteger(min)) throw new TypeError('min must be an integer');\n      if (!Number.isInteger(max)) throw new TypeError('max must be an integer');\n      if (min >= max) throw new RangeError('min must be smaller than max');\n      var interval = max - min;\n      var matrix = new Matrix(rows, columns);\n\n      for (var i = 0; i < rows; i++) {\n        for (var j = 0; j < columns; j++) {\n          var value = min + Math.round(random() * interval);\n          matrix.set(i, j, value);\n        }\n      }\n\n      return matrix;\n    }\n  }, {\n    key: \"eye\",\n    value: function eye(rows, columns, value) {\n      if (columns === undefined) columns = rows;\n      if (value === undefined) value = 1;\n      var min = Math.min(rows, columns);\n      var matrix = this.zeros(rows, columns);\n\n      for (var i = 0; i < min; i++) {\n        matrix.set(i, i, value);\n      }\n\n      return matrix;\n    }\n  }, {\n    key: \"diag\",\n    value: function diag(data, rows, columns) {\n      var l = data.length;\n      if (rows === undefined) rows = l;\n      if (columns === undefined) columns = rows;\n      var min = Math.min(l, rows, columns);\n      var matrix = this.zeros(rows, columns);\n\n      for (var i = 0; i < min; i++) {\n        matrix.set(i, i, data[i]);\n      }\n\n      return matrix;\n    }\n  }, {\n    key: \"min\",\n    value: function min(matrix1, matrix2) {\n      matrix1 = this.checkMatrix(matrix1);\n      matrix2 = this.checkMatrix(matrix2);\n      var rows = matrix1.rows;\n      var columns = matrix1.columns;\n      var result = new Matrix(rows, columns);\n\n      for (var i = 0; i < rows; i++) {\n        for (var j = 0; j < columns; j++) {\n          result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"max\",\n    value: function max(matrix1, matrix2) {\n      matrix1 = this.checkMatrix(matrix1);\n      matrix2 = this.checkMatrix(matrix2);\n      var rows = matrix1.rows;\n      var columns = matrix1.columns;\n      var result = new this(rows, columns);\n\n      for (var i = 0; i < rows; i++) {\n        for (var j = 0; j < columns; j++) {\n          result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"checkMatrix\",\n    value: function checkMatrix(value) {\n      return AbstractMatrix.isMatrix(value) ? value : new Matrix(value);\n    }\n  }, {\n    key: \"isMatrix\",\n    value: function isMatrix(value) {\n      return value != null && value.klass === 'Matrix';\n    }\n  }]);\n\n  return AbstractMatrix;\n}();\nAbstractMatrix.prototype.klass = 'Matrix';\n\nif (typeof Symbol !== 'undefined') {\n  AbstractMatrix.prototype[Symbol.for('nodejs.util.inspect.custom')] = inspectMatrix;\n}\n\nfunction compareNumbers(a, b) {\n  return a - b;\n} // Synonyms\n\n\nAbstractMatrix.random = AbstractMatrix.rand;\nAbstractMatrix.randomInt = AbstractMatrix.randInt;\nAbstractMatrix.diagonal = AbstractMatrix.diag;\nAbstractMatrix.prototype.diagonal = AbstractMatrix.prototype.diag;\nAbstractMatrix.identity = AbstractMatrix.eye;\nAbstractMatrix.prototype.negate = AbstractMatrix.prototype.neg;\nAbstractMatrix.prototype.tensorProduct = AbstractMatrix.prototype.kroneckerProduct;\n\nvar Matrix = /*#__PURE__*/function (_AbstractMatrix) {\n  _inherits(Matrix, _AbstractMatrix);\n\n  var _super = _createSuper(Matrix);\n\n  function Matrix(nRows, nColumns) {\n    var _this;\n\n    _classCallCheck(this, Matrix);\n\n    _this = _super.call(this);\n\n    if (Matrix.isMatrix(nRows)) {\n      // eslint-disable-next-line no-constructor-return\n      return _possibleConstructorReturn(_this, nRows.clone());\n    } else if (Number.isInteger(nRows) && nRows >= 0) {\n      // Create an empty matrix\n      _this.data = [];\n\n      if (Number.isInteger(nColumns) && nColumns >= 0) {\n        for (var i = 0; i < nRows; i++) {\n          _this.data.push(new Float64Array(nColumns));\n        }\n      } else {\n        throw new TypeError('nColumns must be a positive integer');\n      }\n    } else if (Array.isArray(nRows)) {\n      // Copy the values from the 2D array\n      var arrayData = nRows;\n      nRows = arrayData.length;\n      nColumns = nRows ? arrayData[0].length : 0;\n\n      if (typeof nColumns !== 'number') {\n        throw new TypeError('Data must be a 2D array with at least one element');\n      }\n\n      _this.data = [];\n\n      for (var _i3 = 0; _i3 < nRows; _i3++) {\n        if (arrayData[_i3].length !== nColumns) {\n          throw new RangeError('Inconsistent array dimensions');\n        }\n\n        _this.data.push(Float64Array.from(arrayData[_i3]));\n      }\n    } else {\n      throw new TypeError('First argument must be a positive number or an array');\n    }\n\n    _this.rows = nRows;\n    _this.columns = nColumns;\n    return _this;\n  }\n\n  _createClass(Matrix, [{\n    key: \"set\",\n    value: function set(rowIndex, columnIndex, value) {\n      this.data[rowIndex][columnIndex] = value;\n      return this;\n    }\n  }, {\n    key: \"get\",\n    value: function get(rowIndex, columnIndex) {\n      return this.data[rowIndex][columnIndex];\n    }\n  }, {\n    key: \"removeRow\",\n    value: function removeRow(index) {\n      checkRowIndex(this, index);\n      this.data.splice(index, 1);\n      this.rows -= 1;\n      return this;\n    }\n  }, {\n    key: \"addRow\",\n    value: function addRow(index, array) {\n      if (array === undefined) {\n        array = index;\n        index = this.rows;\n      }\n\n      checkRowIndex(this, index, true);\n      array = Float64Array.from(checkRowVector(this, array));\n      this.data.splice(index, 0, array);\n      this.rows += 1;\n      return this;\n    }\n  }, {\n    key: \"removeColumn\",\n    value: function removeColumn(index) {\n      checkColumnIndex(this, index);\n\n      for (var i = 0; i < this.rows; i++) {\n        var newRow = new Float64Array(this.columns - 1);\n\n        for (var j = 0; j < index; j++) {\n          newRow[j] = this.data[i][j];\n        }\n\n        for (var _j2 = index + 1; _j2 < this.columns; _j2++) {\n          newRow[_j2 - 1] = this.data[i][_j2];\n        }\n\n        this.data[i] = newRow;\n      }\n\n      this.columns -= 1;\n      return this;\n    }\n  }, {\n    key: \"addColumn\",\n    value: function addColumn(index, array) {\n      if (typeof array === 'undefined') {\n        array = index;\n        index = this.columns;\n      }\n\n      checkColumnIndex(this, index, true);\n      array = checkColumnVector(this, array);\n\n      for (var i = 0; i < this.rows; i++) {\n        var newRow = new Float64Array(this.columns + 1);\n        var j = 0;\n\n        for (; j < index; j++) {\n          newRow[j] = this.data[i][j];\n        }\n\n        newRow[j++] = array[i];\n\n        for (; j < this.columns + 1; j++) {\n          newRow[j] = this.data[i][j - 1];\n        }\n\n        this.data[i] = newRow;\n      }\n\n      this.columns += 1;\n      return this;\n    }\n  }]);\n\n  return Matrix;\n}(AbstractMatrix);\n\nexport { Matrix as default };\ninstallMathOperations(AbstractMatrix, Matrix);","map":{"version":3,"sources":["/Users/liuzhenwei/Desktop/Respiration_React/my-app/node_modules/ml-matrix/src/matrix.js"],"names":["rescale","inspectMatrix","inspectMatrixWithOptions","installMathOperations","sumByRow","sumByColumn","sumAll","productByRow","productByColumn","productAll","varianceByRow","varianceByColumn","varianceAll","centerByRow","centerByColumn","centerAll","scaleByRow","scaleByColumn","scaleAll","getScaleByRow","getScaleByColumn","getScaleAll","checkRowVector","checkRowIndex","checkColumnIndex","checkColumnVector","checkRange","checkIndices","checkNonEmpty","AbstractMatrix","rows","columns","callback","TypeError","i","j","call","array","push","get","copy","to2DArray","isSquare","previousColumn","isEchelonForm","checked","isReducedEchelonForm","k","result","clone","h","iMax","swapRows","tmp","set","factor","echelonForm","m","n","maxRow","p","pivot","Error","options","Number","isInteger","matrix","Matrix","setSubMatrix","value","mulS","index","row","rowVector","getRow","row1","row2","temp","column","columnVector","getColumn","column1","column2","vector","isEmpty","NaN","v","idx","min","Math","diag","type","max","sqrt","RangeError","sum","vector2","isMatrix","to1DArray","vector1","length","dot","other","checkMatrix","Bcolj","Float64Array","s","a11","b11","a12","b12","a21","b21","a22","b22","m1","m2","m3","m4","m5","m6","m7","c00","c01","c10","c11","a00","a01","a02","a10","a20","b00","b01","b02","b10","b20","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","m20","m21","m22","m23","c02","c12","c20","c21","c22","y","x","r1","c1","r2","c2","console","warn","embed","mat","cols","r","c","resultat","zeros","blockMult","a","b","mmul","halfRows","parseInt","halfCols","subMatrix","add","sub","isFinite","newMatrix","output","setRow","setColumn","middle","ceil","first","last","q","l","AxI","kroneckerProduct","eye","IxB","compareFunction","compareNumbers","sort","startRow","endRow","startColumn","endColumn","indices","undefined","rowIndices","columnIndices","rowIndex","columnIndex","trace","by","size","unbiased","mean","Array","isArray","variance","center","scale","newRows","newColumns","newData","fill","random","interval","round","data","matrix1","matrix2","klass","prototype","Symbol","for","rand","randomInt","randInt","diagonal","identity","negate","neg","tensorProduct","nRows","nColumns","arrayData","from","splice","newRow"],"mappings":"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","sourcesContent":["import rescale from 'ml-array-rescale';\n\nimport { inspectMatrix, inspectMatrixWithOptions } from './inspect';\nimport { installMathOperations } from './mathOperations';\nimport {\n  sumByRow,\n  sumByColumn,\n  sumAll,\n  productByRow,\n  productByColumn,\n  productAll,\n  varianceByRow,\n  varianceByColumn,\n  varianceAll,\n  centerByRow,\n  centerByColumn,\n  centerAll,\n  scaleByRow,\n  scaleByColumn,\n  scaleAll,\n  getScaleByRow,\n  getScaleByColumn,\n  getScaleAll,\n} from './stat';\nimport {\n  checkRowVector,\n  checkRowIndex,\n  checkColumnIndex,\n  checkColumnVector,\n  checkRange,\n  checkIndices,\n  checkNonEmpty,\n} from './util';\n\nexport class AbstractMatrix {\n  static from1DArray(newRows, newColumns, newData) {\n    let length = newRows * newColumns;\n    if (length !== newData.length) {\n      throw new RangeError('data length does not match given dimensions');\n    }\n    let newMatrix = new Matrix(newRows, newColumns);\n    for (let row = 0; row < newRows; row++) {\n      for (let column = 0; column < newColumns; column++) {\n        newMatrix.set(row, column, newData[row * newColumns + column]);\n      }\n    }\n    return newMatrix;\n  }\n\n  static rowVector(newData) {\n    let vector = new Matrix(1, newData.length);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(0, i, newData[i]);\n    }\n    return vector;\n  }\n\n  static columnVector(newData) {\n    let vector = new Matrix(newData.length, 1);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(i, 0, newData[i]);\n    }\n    return vector;\n  }\n\n  static zeros(rows, columns) {\n    return new Matrix(rows, columns);\n  }\n\n  static ones(rows, columns) {\n    return new Matrix(rows, columns).fill(1);\n  }\n\n  static rand(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { random = Math.random } = options;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.set(i, j, random());\n      }\n    }\n    return matrix;\n  }\n\n  static randInt(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1000, random = Math.random } = options;\n    if (!Number.isInteger(min)) throw new TypeError('min must be an integer');\n    if (!Number.isInteger(max)) throw new TypeError('max must be an integer');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let interval = max - min;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        let value = min + Math.round(random() * interval);\n        matrix.set(i, j, value);\n      }\n    }\n    return matrix;\n  }\n\n  static eye(rows, columns, value) {\n    if (columns === undefined) columns = rows;\n    if (value === undefined) value = 1;\n    let min = Math.min(rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, value);\n    }\n    return matrix;\n  }\n\n  static diag(data, rows, columns) {\n    let l = data.length;\n    if (rows === undefined) rows = l;\n    if (columns === undefined) columns = rows;\n    let min = Math.min(l, rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, data[i]);\n    }\n    return matrix;\n  }\n\n  static min(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static max(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new this(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static checkMatrix(value) {\n    return AbstractMatrix.isMatrix(value) ? value : new Matrix(value);\n  }\n\n  static isMatrix(value) {\n    return value != null && value.klass === 'Matrix';\n  }\n\n  get size() {\n    return this.rows * this.columns;\n  }\n\n  apply(callback) {\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback must be a function');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        callback.call(this, i, j);\n      }\n    }\n    return this;\n  }\n\n  to1DArray() {\n    let array = [];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        array.push(this.get(i, j));\n      }\n    }\n    return array;\n  }\n\n  to2DArray() {\n    let copy = [];\n    for (let i = 0; i < this.rows; i++) {\n      copy.push([]);\n      for (let j = 0; j < this.columns; j++) {\n        copy[i].push(this.get(i, j));\n      }\n    }\n    return copy;\n  }\n\n  toJSON() {\n    return this.to2DArray();\n  }\n\n  isRowVector() {\n    return this.rows === 1;\n  }\n\n  isColumnVector() {\n    return this.columns === 1;\n  }\n\n  isVector() {\n    return this.rows === 1 || this.columns === 1;\n  }\n\n  isSquare() {\n    return this.rows === this.columns;\n  }\n\n  isEmpty() {\n    return this.rows === 0 || this.columns === 0;\n  }\n\n  isSymmetric() {\n    if (this.isSquare()) {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j <= i; j++) {\n          if (this.get(i, j) !== this.get(j, i)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  isEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isEchelonForm = false;\n          checked = true;\n        }\n      }\n      i++;\n    }\n    return isEchelonForm;\n  }\n\n  isReducedEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isReducedEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isReducedEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isReducedEchelonForm = false;\n          checked = true;\n        }\n      }\n      for (let k = j + 1; k < this.rows; k++) {\n        if (this.get(i, k) !== 0) {\n          isReducedEchelonForm = false;\n        }\n      }\n      i++;\n    }\n    return isReducedEchelonForm;\n  }\n\n  echelonForm() {\n    let result = this.clone();\n    let h = 0;\n    let k = 0;\n    while (h < result.rows && k < result.columns) {\n      let iMax = h;\n      for (let i = h; i < result.rows; i++) {\n        if (result.get(i, k) > result.get(iMax, k)) {\n          iMax = i;\n        }\n      }\n      if (result.get(iMax, k) === 0) {\n        k++;\n      } else {\n        result.swapRows(h, iMax);\n        let tmp = result.get(h, k);\n        for (let j = k; j < result.columns; j++) {\n          result.set(h, j, result.get(h, j) / tmp);\n        }\n        for (let i = h + 1; i < result.rows; i++) {\n          let factor = result.get(i, k) / result.get(h, k);\n          result.set(i, k, 0);\n          for (let j = k + 1; j < result.columns; j++) {\n            result.set(i, j, result.get(i, j) - result.get(h, j) * factor);\n          }\n        }\n        h++;\n        k++;\n      }\n    }\n    return result;\n  }\n\n  reducedEchelonForm() {\n    let result = this.echelonForm();\n    let m = result.columns;\n    let n = result.rows;\n    let h = n - 1;\n    while (h >= 0) {\n      if (result.maxRow(h) === 0) {\n        h--;\n      } else {\n        let p = 0;\n        let pivot = false;\n        while (p < n && pivot === false) {\n          if (result.get(h, p) === 1) {\n            pivot = true;\n          } else {\n            p++;\n          }\n        }\n        for (let i = 0; i < h; i++) {\n          let factor = result.get(i, p);\n          for (let j = p; j < m; j++) {\n            let tmp = result.get(i, j) - factor * result.get(h, j);\n            result.set(i, j, tmp);\n          }\n        }\n        h--;\n      }\n    }\n    return result;\n  }\n\n  set() {\n    throw new Error('set method is unimplemented');\n  }\n\n  get() {\n    throw new Error('get method is unimplemented');\n  }\n\n  repeat(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { rows = 1, columns = 1 } = options;\n    if (!Number.isInteger(rows) || rows <= 0) {\n      throw new TypeError('rows must be a positive integer');\n    }\n    if (!Number.isInteger(columns) || columns <= 0) {\n      throw new TypeError('columns must be a positive integer');\n    }\n    let matrix = new Matrix(this.rows * rows, this.columns * columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.setSubMatrix(this, this.rows * i, this.columns * j);\n      }\n    }\n    return matrix;\n  }\n\n  fill(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, value);\n      }\n    }\n    return this;\n  }\n\n  neg() {\n    return this.mulS(-1);\n  }\n\n  getRow(index) {\n    checkRowIndex(this, index);\n    let row = [];\n    for (let i = 0; i < this.columns; i++) {\n      row.push(this.get(index, i));\n    }\n    return row;\n  }\n\n  getRowVector(index) {\n    return Matrix.rowVector(this.getRow(index));\n  }\n\n  setRow(index, array) {\n    checkRowIndex(this, index);\n    array = checkRowVector(this, array);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, array[i]);\n    }\n    return this;\n  }\n\n  swapRows(row1, row2) {\n    checkRowIndex(this, row1);\n    checkRowIndex(this, row2);\n    for (let i = 0; i < this.columns; i++) {\n      let temp = this.get(row1, i);\n      this.set(row1, i, this.get(row2, i));\n      this.set(row2, i, temp);\n    }\n    return this;\n  }\n\n  getColumn(index) {\n    checkColumnIndex(this, index);\n    let column = [];\n    for (let i = 0; i < this.rows; i++) {\n      column.push(this.get(i, index));\n    }\n    return column;\n  }\n\n  getColumnVector(index) {\n    return Matrix.columnVector(this.getColumn(index));\n  }\n\n  setColumn(index, array) {\n    checkColumnIndex(this, index);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, array[i]);\n    }\n    return this;\n  }\n\n  swapColumns(column1, column2) {\n    checkColumnIndex(this, column1);\n    checkColumnIndex(this, column2);\n    for (let i = 0; i < this.rows; i++) {\n      let temp = this.get(i, column1);\n      this.set(i, column1, this.get(i, column2));\n      this.set(i, column2, temp);\n    }\n    return this;\n  }\n\n  addRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[j]);\n      }\n    }\n    return this;\n  }\n\n  subRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[j]);\n      }\n    }\n    return this;\n  }\n\n  mulRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[j]);\n      }\n    }\n    return this;\n  }\n\n  divRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[j]);\n      }\n    }\n    return this;\n  }\n\n  addColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[i]);\n      }\n    }\n    return this;\n  }\n\n  subColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[i]);\n      }\n    }\n    return this;\n  }\n\n  divColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulRow(index, value) {\n    checkRowIndex(this, index);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, this.get(index, i) * value);\n    }\n    return this;\n  }\n\n  mulColumn(index, value) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, this.get(i, index) * value);\n    }\n    return this;\n  }\n\n  max() {\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, 0);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n        }\n      }\n    }\n    return v;\n  }\n\n  maxIndex() {\n    checkNonEmpty(this);\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  min() {\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, 0);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n        }\n      }\n    }\n    return v;\n  }\n\n  minIndex() {\n    checkNonEmpty(this);\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  maxRow(row) {\n    checkRowIndex(this, row);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  maxRowIndex(row) {\n    checkRowIndex(this, row);\n    checkNonEmpty(this);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  minRow(row) {\n    checkRowIndex(this, row);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  minRowIndex(row) {\n    checkRowIndex(this, row);\n    checkNonEmpty(this);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  maxColumn(column) {\n    checkColumnIndex(this, column);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  maxColumnIndex(column) {\n    checkColumnIndex(this, column);\n    checkNonEmpty(this);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  minColumn(column) {\n    checkColumnIndex(this, column);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  minColumnIndex(column) {\n    checkColumnIndex(this, column);\n    checkNonEmpty(this);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  diag() {\n    let min = Math.min(this.rows, this.columns);\n    let diag = [];\n    for (let i = 0; i < min; i++) {\n      diag.push(this.get(i, i));\n    }\n    return diag;\n  }\n\n  norm(type = 'frobenius') {\n    let result = 0;\n    if (type === 'max') {\n      return this.max();\n    } else if (type === 'frobenius') {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j < this.columns; j++) {\n          result = result + this.get(i, j) * this.get(i, j);\n        }\n      }\n      return Math.sqrt(result);\n    } else {\n      throw new RangeError(`unknown norm type: ${type}`);\n    }\n  }\n\n  cumulativeSum() {\n    let sum = 0;\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        sum += this.get(i, j);\n        this.set(i, j, sum);\n      }\n    }\n    return this;\n  }\n\n  dot(vector2) {\n    if (AbstractMatrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\n    let vector1 = this.to1DArray();\n    if (vector1.length !== vector2.length) {\n      throw new RangeError('vectors do not have the same size');\n    }\n    let dot = 0;\n    for (let i = 0; i < vector1.length; i++) {\n      dot += vector1[i] * vector2[i];\n    }\n    return dot;\n  }\n\n  mmul(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.columns;\n\n    let result = new Matrix(m, p);\n\n    let Bcolj = new Float64Array(n);\n    for (let j = 0; j < p; j++) {\n      for (let k = 0; k < n; k++) {\n        Bcolj[k] = other.get(k, j);\n      }\n\n      for (let i = 0; i < m; i++) {\n        let s = 0;\n        for (let k = 0; k < n; k++) {\n          s += this.get(i, k) * Bcolj[k];\n        }\n\n        result.set(i, j, s);\n      }\n    }\n    return result;\n  }\n\n  strassen2x2(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(2, 2);\n    const a11 = this.get(0, 0);\n    const b11 = other.get(0, 0);\n    const a12 = this.get(0, 1);\n    const b12 = other.get(0, 1);\n    const a21 = this.get(1, 0);\n    const b21 = other.get(1, 0);\n    const a22 = this.get(1, 1);\n    const b22 = other.get(1, 1);\n\n    // Compute intermediate values.\n    const m1 = (a11 + a22) * (b11 + b22);\n    const m2 = (a21 + a22) * b11;\n    const m3 = a11 * (b12 - b22);\n    const m4 = a22 * (b21 - b11);\n    const m5 = (a11 + a12) * b22;\n    const m6 = (a21 - a11) * (b11 + b12);\n    const m7 = (a12 - a22) * (b21 + b22);\n\n    // Combine intermediate values into the output.\n    const c00 = m1 + m4 - m5 + m7;\n    const c01 = m3 + m5;\n    const c10 = m2 + m4;\n    const c11 = m1 - m2 + m3 + m6;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    return result;\n  }\n\n  strassen3x3(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(3, 3);\n\n    const a00 = this.get(0, 0);\n    const a01 = this.get(0, 1);\n    const a02 = this.get(0, 2);\n    const a10 = this.get(1, 0);\n    const a11 = this.get(1, 1);\n    const a12 = this.get(1, 2);\n    const a20 = this.get(2, 0);\n    const a21 = this.get(2, 1);\n    const a22 = this.get(2, 2);\n\n    const b00 = other.get(0, 0);\n    const b01 = other.get(0, 1);\n    const b02 = other.get(0, 2);\n    const b10 = other.get(1, 0);\n    const b11 = other.get(1, 1);\n    const b12 = other.get(1, 2);\n    const b20 = other.get(2, 0);\n    const b21 = other.get(2, 1);\n    const b22 = other.get(2, 2);\n\n    const m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\n    const m2 = (a00 - a10) * (-b01 + b11);\n    const m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\n    const m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\n    const m5 = (a10 + a11) * (-b00 + b01);\n    const m6 = a00 * b00;\n    const m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\n    const m8 = (-a00 + a20) * (b02 - b12);\n    const m9 = (a20 + a21) * (-b00 + b02);\n    const m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\n    const m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\n    const m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\n    const m13 = (a02 - a22) * (b11 - b21);\n    const m14 = a02 * b20;\n    const m15 = (a21 + a22) * (-b20 + b21);\n    const m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\n    const m17 = (a02 - a12) * (b12 - b22);\n    const m18 = (a11 + a12) * (-b20 + b22);\n    const m19 = a01 * b10;\n    const m20 = a12 * b21;\n    const m21 = a10 * b02;\n    const m22 = a20 * b01;\n    const m23 = a22 * b22;\n\n    const c00 = m6 + m14 + m19;\n    const c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\n    const c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\n    const c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\n    const c11 = m2 + m4 + m5 + m6 + m20;\n    const c12 = m14 + m16 + m17 + m18 + m21;\n    const c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\n    const c21 = m12 + m13 + m14 + m15 + m22;\n    const c22 = m6 + m7 + m8 + m9 + m23;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(0, 2, c02);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    result.set(1, 2, c12);\n    result.set(2, 0, c20);\n    result.set(2, 1, c21);\n    result.set(2, 2, c22);\n    return result;\n  }\n\n  mmulStrassen(y) {\n    y = Matrix.checkMatrix(y);\n    let x = this.clone();\n    let r1 = x.rows;\n    let c1 = x.columns;\n    let r2 = y.rows;\n    let c2 = y.columns;\n    if (c1 !== r2) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Multiplying ${r1} x ${c1} and ${r2} x ${c2} matrix: dimensions do not match.`,\n      );\n    }\n\n    // Put a matrix into the top left of a matrix of zeros.\n    // `rows` and `cols` are the dimensions of the output matrix.\n    function embed(mat, rows, cols) {\n      let r = mat.rows;\n      let c = mat.columns;\n      if (r === rows && c === cols) {\n        return mat;\n      } else {\n        let resultat = AbstractMatrix.zeros(rows, cols);\n        resultat = resultat.setSubMatrix(mat, 0, 0);\n        return resultat;\n      }\n    }\n\n    // Make sure both matrices are the same size.\n    // This is exclusively for simplicity:\n    // this algorithm can be implemented with matrices of different sizes.\n\n    let r = Math.max(r1, r2);\n    let c = Math.max(c1, c2);\n    x = embed(x, r, c);\n    y = embed(y, r, c);\n\n    // Our recursive multiplication function.\n    function blockMult(a, b, rows, cols) {\n      // For small matrices, resort to naive multiplication.\n      if (rows <= 512 || cols <= 512) {\n        return a.mmul(b); // a is equivalent to this\n      }\n\n      // Apply dynamic padding.\n      if (rows % 2 === 1 && cols % 2 === 1) {\n        a = embed(a, rows + 1, cols + 1);\n        b = embed(b, rows + 1, cols + 1);\n      } else if (rows % 2 === 1) {\n        a = embed(a, rows + 1, cols);\n        b = embed(b, rows + 1, cols);\n      } else if (cols % 2 === 1) {\n        a = embed(a, rows, cols + 1);\n        b = embed(b, rows, cols + 1);\n      }\n\n      let halfRows = parseInt(a.rows / 2, 10);\n      let halfCols = parseInt(a.columns / 2, 10);\n      // Subdivide input matrices.\n      let a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n      let b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n\n      let a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\n      let b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\n\n      let a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\n      let b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\n\n      let a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\n      let b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1);\n\n      // Compute intermediate values.\n      let m1 = blockMult(\n        AbstractMatrix.add(a11, a22),\n        AbstractMatrix.add(b11, b22),\n        halfRows,\n        halfCols,\n      );\n      let m2 = blockMult(AbstractMatrix.add(a21, a22), b11, halfRows, halfCols);\n      let m3 = blockMult(a11, AbstractMatrix.sub(b12, b22), halfRows, halfCols);\n      let m4 = blockMult(a22, AbstractMatrix.sub(b21, b11), halfRows, halfCols);\n      let m5 = blockMult(AbstractMatrix.add(a11, a12), b22, halfRows, halfCols);\n      let m6 = blockMult(\n        AbstractMatrix.sub(a21, a11),\n        AbstractMatrix.add(b11, b12),\n        halfRows,\n        halfCols,\n      );\n      let m7 = blockMult(\n        AbstractMatrix.sub(a12, a22),\n        AbstractMatrix.add(b21, b22),\n        halfRows,\n        halfCols,\n      );\n\n      // Combine intermediate values into the output.\n      let c11 = AbstractMatrix.add(m1, m4);\n      c11.sub(m5);\n      c11.add(m7);\n      let c12 = AbstractMatrix.add(m3, m5);\n      let c21 = AbstractMatrix.add(m2, m4);\n      let c22 = AbstractMatrix.sub(m1, m2);\n      c22.add(m3);\n      c22.add(m6);\n\n      // Crop output to the desired size (undo dynamic padding).\n      let resultat = AbstractMatrix.zeros(2 * c11.rows, 2 * c11.columns);\n      resultat = resultat.setSubMatrix(c11, 0, 0);\n      resultat = resultat.setSubMatrix(c12, c11.rows, 0);\n      resultat = resultat.setSubMatrix(c21, 0, c11.columns);\n      resultat = resultat.setSubMatrix(c22, c11.rows, c11.columns);\n      return resultat.subMatrix(0, rows - 1, 0, cols - 1);\n    }\n    return blockMult(x, y, r, c);\n  }\n\n  scaleRows(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.rows; i++) {\n      const row = this.getRow(i);\n      if (row.length > 0) {\n        rescale(row, { min, max, output: row });\n      }\n      newMatrix.setRow(i, row);\n    }\n    return newMatrix;\n  }\n\n  scaleColumns(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.columns; i++) {\n      const column = this.getColumn(i);\n      if (column.length) {\n        rescale(column, {\n          min: min,\n          max: max,\n          output: column,\n        });\n      }\n      newMatrix.setColumn(i, column);\n    }\n    return newMatrix;\n  }\n\n  flipRows() {\n    const middle = Math.ceil(this.columns / 2);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < middle; j++) {\n        let first = this.get(i, j);\n        let last = this.get(i, this.columns - 1 - j);\n        this.set(i, j, last);\n        this.set(i, this.columns - 1 - j, first);\n      }\n    }\n    return this;\n  }\n\n  flipColumns() {\n    const middle = Math.ceil(this.rows / 2);\n    for (let j = 0; j < this.columns; j++) {\n      for (let i = 0; i < middle; i++) {\n        let first = this.get(i, j);\n        let last = this.get(this.rows - 1 - i, j);\n        this.set(i, j, last);\n        this.set(this.rows - 1 - i, j, first);\n      }\n    }\n    return this;\n  }\n\n  kroneckerProduct(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.rows;\n    let q = other.columns;\n\n    let result = new Matrix(m * p, n * q);\n    for (let i = 0; i < m; i++) {\n      for (let j = 0; j < n; j++) {\n        for (let k = 0; k < p; k++) {\n          for (let l = 0; l < q; l++) {\n            result.set(p * i + k, q * j + l, this.get(i, j) * other.get(k, l));\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  kroneckerSum(other) {\n    other = Matrix.checkMatrix(other);\n    if (!this.isSquare() || !other.isSquare()) {\n      throw new Error('Kronecker Sum needs two Square Matrices');\n    }\n    let m = this.rows;\n    let n = other.rows;\n    let AxI = this.kroneckerProduct(Matrix.eye(n, n));\n    let IxB = Matrix.eye(m, m).kroneckerProduct(other);\n    return AxI.add(IxB);\n  }\n\n  transpose() {\n    let result = new Matrix(this.columns, this.rows);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        result.set(j, i, this.get(i, j));\n      }\n    }\n    return result;\n  }\n\n  sortRows(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.rows; i++) {\n      this.setRow(i, this.getRow(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  sortColumns(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.columns; i++) {\n      this.setColumn(i, this.getColumn(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  subMatrix(startRow, endRow, startColumn, endColumn) {\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    let newMatrix = new Matrix(\n      endRow - startRow + 1,\n      endColumn - startColumn + 1,\n    );\n    for (let i = startRow; i <= endRow; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        newMatrix.set(i - startRow, j - startColumn, this.get(i, j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixRow(indices, startColumn, endColumn) {\n    if (startColumn === undefined) startColumn = 0;\n    if (endColumn === undefined) endColumn = this.columns - 1;\n    if (\n      startColumn > endColumn ||\n      startColumn < 0 ||\n      startColumn >= this.columns ||\n      endColumn < 0 ||\n      endColumn >= this.columns\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(indices.length, endColumn - startColumn + 1);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        if (indices[i] < 0 || indices[i] >= this.rows) {\n          throw new RangeError(`Row index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(i, j - startColumn, this.get(indices[i], j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixColumn(indices, startRow, endRow) {\n    if (startRow === undefined) startRow = 0;\n    if (endRow === undefined) endRow = this.rows - 1;\n    if (\n      startRow > endRow ||\n      startRow < 0 ||\n      startRow >= this.rows ||\n      endRow < 0 ||\n      endRow >= this.rows\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(endRow - startRow + 1, indices.length);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startRow; j <= endRow; j++) {\n        if (indices[i] < 0 || indices[i] >= this.columns) {\n          throw new RangeError(`Column index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(j - startRow, i, this.get(j, indices[i]));\n      }\n    }\n    return newMatrix;\n  }\n\n  setSubMatrix(matrix, startRow, startColumn) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (matrix.isEmpty()) {\n      return this;\n    }\n    let endRow = startRow + matrix.rows - 1;\n    let endColumn = startColumn + matrix.columns - 1;\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    for (let i = 0; i < matrix.rows; i++) {\n      for (let j = 0; j < matrix.columns; j++) {\n        this.set(startRow + i, startColumn + j, matrix.get(i, j));\n      }\n    }\n    return this;\n  }\n\n  selection(rowIndices, columnIndices) {\n    let indices = checkIndices(this, rowIndices, columnIndices);\n    let newMatrix = new Matrix(rowIndices.length, columnIndices.length);\n    for (let i = 0; i < indices.row.length; i++) {\n      let rowIndex = indices.row[i];\n      for (let j = 0; j < indices.column.length; j++) {\n        let columnIndex = indices.column[j];\n        newMatrix.set(i, j, this.get(rowIndex, columnIndex));\n      }\n    }\n    return newMatrix;\n  }\n\n  trace() {\n    let min = Math.min(this.rows, this.columns);\n    let trace = 0;\n    for (let i = 0; i < min; i++) {\n      trace += this.get(i, i);\n    }\n    return trace;\n  }\n\n  clone() {\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let row = 0; row < this.rows; row++) {\n      for (let column = 0; column < this.columns; column++) {\n        newMatrix.set(row, column, this.get(row, column));\n      }\n    }\n    return newMatrix;\n  }\n\n  sum(by) {\n    switch (by) {\n      case 'row':\n        return sumByRow(this);\n      case 'column':\n        return sumByColumn(this);\n      case undefined:\n        return sumAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  product(by) {\n    switch (by) {\n      case 'row':\n        return productByRow(this);\n      case 'column':\n        return productByColumn(this);\n      case undefined:\n        return productAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  mean(by) {\n    const sum = this.sum(by);\n    switch (by) {\n      case 'row': {\n        for (let i = 0; i < this.rows; i++) {\n          sum[i] /= this.columns;\n        }\n        return sum;\n      }\n      case 'column': {\n        for (let i = 0; i < this.columns; i++) {\n          sum[i] /= this.rows;\n        }\n        return sum;\n      }\n      case undefined:\n        return sum / this.size;\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  variance(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { unbiased = true, mean = this.mean(by) } = options;\n    if (typeof unbiased !== 'boolean') {\n      throw new TypeError('unbiased must be a boolean');\n    }\n    switch (by) {\n      case 'row': {\n        if (!Array.isArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByRow(this, unbiased, mean);\n      }\n      case 'column': {\n        if (!Array.isArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByColumn(this, unbiased, mean);\n      }\n      case undefined: {\n        if (typeof mean !== 'number') {\n          throw new TypeError('mean must be a number');\n        }\n        return varianceAll(this, unbiased, mean);\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  standardDeviation(by, options) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    const variance = this.variance(by, options);\n    if (by === undefined) {\n      return Math.sqrt(variance);\n    } else {\n      for (let i = 0; i < variance.length; i++) {\n        variance[i] = Math.sqrt(variance[i]);\n      }\n      return variance;\n    }\n  }\n\n  center(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { center = this.mean(by) } = options;\n    switch (by) {\n      case 'row': {\n        if (!Array.isArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByRow(this, center);\n        return this;\n      }\n      case 'column': {\n        if (!Array.isArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByColumn(this, center);\n        return this;\n      }\n      case undefined: {\n        if (typeof center !== 'number') {\n          throw new TypeError('center must be a number');\n        }\n        centerAll(this, center);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  scale(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    let scale = options.scale;\n    switch (by) {\n      case 'row': {\n        if (scale === undefined) {\n          scale = getScaleByRow(this);\n        } else if (!Array.isArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByRow(this, scale);\n        return this;\n      }\n      case 'column': {\n        if (scale === undefined) {\n          scale = getScaleByColumn(this);\n        } else if (!Array.isArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByColumn(this, scale);\n        return this;\n      }\n      case undefined: {\n        if (scale === undefined) {\n          scale = getScaleAll(this);\n        } else if (typeof scale !== 'number') {\n          throw new TypeError('scale must be a number');\n        }\n        scaleAll(this, scale);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  toString(options) {\n    return inspectMatrixWithOptions(this, options);\n  }\n}\n\nAbstractMatrix.prototype.klass = 'Matrix';\nif (typeof Symbol !== 'undefined') {\n  AbstractMatrix.prototype[\n    Symbol.for('nodejs.util.inspect.custom')\n  ] = inspectMatrix;\n}\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\n// Synonyms\nAbstractMatrix.random = AbstractMatrix.rand;\nAbstractMatrix.randomInt = AbstractMatrix.randInt;\nAbstractMatrix.diagonal = AbstractMatrix.diag;\nAbstractMatrix.prototype.diagonal = AbstractMatrix.prototype.diag;\nAbstractMatrix.identity = AbstractMatrix.eye;\nAbstractMatrix.prototype.negate = AbstractMatrix.prototype.neg;\nAbstractMatrix.prototype.tensorProduct =\n  AbstractMatrix.prototype.kroneckerProduct;\n\nexport default class Matrix extends AbstractMatrix {\n  constructor(nRows, nColumns) {\n    super();\n    if (Matrix.isMatrix(nRows)) {\n      // eslint-disable-next-line no-constructor-return\n      return nRows.clone();\n    } else if (Number.isInteger(nRows) && nRows >= 0) {\n      // Create an empty matrix\n      this.data = [];\n      if (Number.isInteger(nColumns) && nColumns >= 0) {\n        for (let i = 0; i < nRows; i++) {\n          this.data.push(new Float64Array(nColumns));\n        }\n      } else {\n        throw new TypeError('nColumns must be a positive integer');\n      }\n    } else if (Array.isArray(nRows)) {\n      // Copy the values from the 2D array\n      const arrayData = nRows;\n      nRows = arrayData.length;\n      nColumns = nRows ? arrayData[0].length : 0;\n      if (typeof nColumns !== 'number') {\n        throw new TypeError(\n          'Data must be a 2D array with at least one element',\n        );\n      }\n      this.data = [];\n      for (let i = 0; i < nRows; i++) {\n        if (arrayData[i].length !== nColumns) {\n          throw new RangeError('Inconsistent array dimensions');\n        }\n        this.data.push(Float64Array.from(arrayData[i]));\n      }\n    } else {\n      throw new TypeError(\n        'First argument must be a positive number or an array',\n      );\n    }\n    this.rows = nRows;\n    this.columns = nColumns;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n\n  removeRow(index) {\n    checkRowIndex(this, index);\n    this.data.splice(index, 1);\n    this.rows -= 1;\n    return this;\n  }\n\n  addRow(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.rows;\n    }\n    checkRowIndex(this, index, true);\n    array = Float64Array.from(checkRowVector(this, array));\n    this.data.splice(index, 0, array);\n    this.rows += 1;\n    return this;\n  }\n\n  removeColumn(index) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns - 1);\n      for (let j = 0; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      for (let j = index + 1; j < this.columns; j++) {\n        newRow[j - 1] = this.data[i][j];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns -= 1;\n    return this;\n  }\n\n  addColumn(index, array) {\n    if (typeof array === 'undefined') {\n      array = index;\n      index = this.columns;\n    }\n    checkColumnIndex(this, index, true);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns + 1);\n      let j = 0;\n      for (; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      newRow[j++] = array[i];\n      for (; j < this.columns + 1; j++) {\n        newRow[j] = this.data[i][j - 1];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns += 1;\n    return this;\n  }\n}\n\ninstallMathOperations(AbstractMatrix, Matrix);\n"]},"metadata":{},"sourceType":"module"}