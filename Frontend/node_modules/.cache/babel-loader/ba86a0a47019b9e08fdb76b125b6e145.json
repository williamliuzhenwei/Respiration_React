{"ast":null,"code":"var _jsxFileName = \"/Users/liuzhenwei/Desktop/Respiration_React/my-app/src/Component/Plot.js\";\nimport React from 'react';\nimport { Button } from 'antd';\nimport { Line } from '@ant-design/charts'; //try microphone example\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar data = [];\nvar timer1 = 1;\nvar entry = {};\nvar res = {};\nvar flag = true; // Main Plot configuration\n\nconst config = {\n  data,\n  xField: 'TimeStamp',\n  yField: 'Rate',\n  label: {\n    style: {\n      fill: '#aaa'\n    }\n  },\n  point: {\n    size: 1,\n    shape: 'dot'\n  }\n}; // Communicate with particle Photon\n\nconst fetchData = () => {\n  // David https://api.particle.io/v1/devices/440048000d51353532343635/output1?access_token=5337556d927166dd61f24a448628ab25b487250d\n  // Siyuan https://api.particle.io/v1/devices/2d004e000d51353532343635/analogvalue?access_token=4ec91795c48fcb469901a8c61e670f4d75ec5cce\n  return fetch(\"https://api.particle.io/v1/devices/440048000d51353532343635/respiration?access_token=5337556d927166dd61f24a448628ab25b487250d\").then(response => response.json()).then(data => res = data).then(console.log(res)).catch(error => {\n    throw error;\n    document.getElementById(\"resRate\").innerHTML = 0;\n  });\n}; // Main Module \n\n\nclass Plot extends React.Component {\n  constructor() {\n    super();\n\n    this.handleClick = () => {\n      this.setState(state => ({\n        isToggleOn: !state.isToggleOn\n      }));\n    };\n\n    this.render = () => {\n      if (this.state.isToggleOn == true) {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            id: \"toggle\",\n            style: {\n              textAlign: 'center'\n            },\n            type: \"primary\",\n            onClick: this.handleClick,\n            children: this.state.isToggleOn ? 'ON' : 'OFF'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Line, { ...config\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true);\n      } else if (this.state.isToggleOn == false) {\n        document.getElementById(\"resRate\").innerHTML = \"Disconnected\"; // data = [];\n\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            id: \"toggle\",\n            style: {\n              textAlign: 'center'\n            },\n            type: \"secondary\",\n            onClick: this.handleClick,\n            children: this.state.isToggleOn ? 'ON' : 'OFF'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Line, { ...config\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true);\n      }\n    };\n\n    this.state = {\n      date: new Date(),\n      isToggleOn: true\n    };\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(() => this.tick(), 2000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n  }\n\n  tick() {\n    fetchData(); // let resR = Math.floor(Math.random() * (17 - 8) + 8);\n\n    let resR = res.result;\n    entry = {\n      TimeStamp: timer1,\n      Rate: Math.round(resR)\n    };\n    timer1 = timer1 + 1;\n\n    if (this.state.isToggleOn == true) {\n      if (resR > 6 && resR < 60) {\n        data.push(entry);\n        document.getElementById(\"resRate\").innerHTML = Math.round(resR);\n        document.getElementById(\"resRate\").className = \"resRate_black\";\n      } else if (resR <= 0 || resR == \"undefined\") {\n        console.log(resR);\n        document.getElementById(\"resRate\").innerHTML = \"Measuring\";\n        document.getElementById(\"resRate\").className = \"resRate_red\";\n      } else {\n        timer1 = timer1 - 1;\n        document.getElementById(\"resRate\").innerHTML = \"Check Device\";\n        document.getElementById(\"resRate\").className = \"resRate_red\";\n      }\n    } else if (this.state.isToggleOn == false) {\n      timer1 = timer1 - 1;\n      entry = {\n        TimeStamp: timer1,\n        Rate: 0\n      };\n      data.push(entry);\n      document.getElementById(\"resRate\").innerHTML = \"Disconnected\";\n    }\n\n    this.setState({\n      date: new Date()\n    });\n  }\n\n}\n\n;\nexport default Plot;","map":{"version":3,"sources":["/Users/liuzhenwei/Desktop/Respiration_React/my-app/src/Component/Plot.js"],"names":["React","Button","Line","data","timer1","entry","res","flag","config","xField","yField","label","style","fill","point","size","shape","fetchData","fetch","then","response","json","console","log","catch","error","document","getElementById","innerHTML","Plot","Component","constructor","handleClick","setState","state","isToggleOn","render","textAlign","date","Date","componentDidMount","timerID","setInterval","tick","componentWillUnmount","clearInterval","resR","result","TimeStamp","Rate","Math","round","push","className"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Button} from 'antd';\nimport { Line } from '@ant-design/charts';\n\n\n\n//try microphone example\nvar data = [];\nvar timer1 = 1;\nvar entry = {};\nvar res = {};\nvar flag = true;\n\n// Main Plot configuration\nconst config = {\n  data,\n  xField: 'TimeStamp',\n  yField: 'Rate',\n  label: {\n    style: {\n      fill: '#aaa',\n    },\n  },\n  point: {\n    size: 1,\n    shape: 'dot',\n  },\n};\n\n// Communicate with particle Photon\nconst fetchData = () => {\n  // David https://api.particle.io/v1/devices/440048000d51353532343635/output1?access_token=5337556d927166dd61f24a448628ab25b487250d\n  // Siyuan https://api.particle.io/v1/devices/2d004e000d51353532343635/analogvalue?access_token=4ec91795c48fcb469901a8c61e670f4d75ec5cce\n  return fetch(\"https://api.particle.io/v1/devices/440048000d51353532343635/respiration?access_token=5337556d927166dd61f24a448628ab25b487250d\")\n        .then((response) => response.json())\n        .then((data) => res = data)\n        .then(console.log(res))\n        .catch(error => {\n          throw(error);\n          document.getElementById(\"resRate\").innerHTML = 0;\n        });}\n\n// Main Module \nclass Plot extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n        date: new Date(),\n        isToggleOn: true\n    }\n}\nhandleClick = () => {\n  this.setState(state => ({\n    isToggleOn: !state.isToggleOn\n  }));\n}\n\ncomponentDidMount() {\n    this.timerID = setInterval(\n        () => this.tick(),\n        2000\n    );\n}\n\ncomponentWillUnmount() {\n    clearInterval(this.timerID);\n}\n\ntick() {\n    fetchData();\n    // let resR = Math.floor(Math.random() * (17 - 8) + 8);\n    let resR = res.result;\n    entry = {TimeStamp: timer1, Rate: Math.round(resR)};\n    timer1 = timer1 + 1;\n  if (this.state.isToggleOn == true){\n    if (resR > 6 && resR < 60){\n      data.push(entry)\n      document.getElementById(\"resRate\").innerHTML = Math.round(resR);\n      document.getElementById(\"resRate\").className = \"resRate_black\";\n    } else if (resR <= 0 || resR == \"undefined\"){\n      console.log(resR);\n      document.getElementById(\"resRate\").innerHTML = \"Measuring\";\n      document.getElementById(\"resRate\").className = \"resRate_red\";\n    } else{\n      timer1 = timer1 - 1;\n      document.getElementById(\"resRate\").innerHTML = \"Check Device\";\n      document.getElementById(\"resRate\").className = \"resRate_red\";\n    }\n    \n  } else if (this.state.isToggleOn == false) {\n    timer1 = timer1 - 1;\n    entry = {TimeStamp: timer1, Rate: 0}\n    data.push(entry)\n    document.getElementById(\"resRate\").innerHTML = \"Disconnected\";\n  }\n    this.setState({\n        date: new Date()\n    })\n}\n      render = () => {\n        if (this.state.isToggleOn == true){\n          return (\n          <>\n          <Button id = \"toggle\" style= {{textAlign:'center'}} type = 'primary' onClick={this.handleClick}>\n                  {this.state.isToggleOn ? 'ON' : 'OFF'}\n          </Button>\n          <br></br>\n          <Line {...config} />\n          <br></br>\n          </>);\n        } else if (this.state.isToggleOn == false){\n          document.getElementById(\"resRate\").innerHTML = \"Disconnected\";\n          // data = [];\n          return (\n          <>\n          \n          <Button id = \"toggle\" style= {{textAlign:'center'}} type = 'secondary' onClick={this.handleClick}>\n                  {this.state.isToggleOn ? 'ON' : 'OFF'}\n          </Button> \n          <br></br>\n          <Line {...config} />\n          <br></br>\n          \n          </>);\n        }\n        \n      }\n       \n};\n\n\n\nexport default Plot;"]},"metadata":{},"sourceType":"module"}