{"ast":null,"code":"import _classCallCheck from \"/Users/liuzhenwei/Desktop/Respiration_React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/liuzhenwei/Desktop/Respiration_React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/**\n * @fileOverview quadTree\n * @author shiwu.wyy@antfin.com\n */\nvar QuadTree = /*#__PURE__*/function () {\n  // each quadtree represents a quadrant and an aggregate body\n  // that represents all bodies inside the quadrant\n  function QuadTree(param) {\n    _classCallCheck(this, QuadTree);\n\n    /**\n     * (aggregated) body in this quad\n     * @type  {object}\n     */\n    this.body = null;\n    /**\n     * tree representing the northwest quadrant\n     * @type  {object}\n     */\n\n    this.quad = null;\n    this.NW = null;\n    this.NE = null;\n    this.SW = null;\n    this.SE = null;\n    /**\n     * threshold\n     * @type  {number}\n     */\n\n    this.theta = 0.5;\n    if (param != null) this.quad = param;\n  } // insert a body(node) into the tree\n\n\n  _createClass(QuadTree, [{\n    key: \"insert\",\n    value: function insert(bo) {\n      // if this node does not contain a body, put the new body bo here\n      if (this.body == null) {\n        this.body = bo;\n        return;\n      } // internal node\n\n\n      if (!this._isExternal()) {\n        // update mass info\n        this.body = this.body.add(bo); // insert body into quadrant\n\n        this._putBody(bo);\n      } else {\n        // external node\n        // divide this region into four children\n        if (this.quad) {\n          this.NW = new QuadTree(this.quad.NW());\n          this.NE = new QuadTree(this.quad.NE());\n          this.SW = new QuadTree(this.quad.SW());\n          this.SE = new QuadTree(this.quad.SE());\n        } // insert this body and bo\n\n\n        this._putBody(this.body);\n\n        this._putBody(bo); // update the mass info\n\n\n        this.body = this.body.add(bo);\n      }\n    } // inserts bo into a quad\n    // tslint:disable-next-line\n\n  }, {\n    key: \"_putBody\",\n    value: function _putBody(bo) {\n      if (!this.quad) return;\n      if (bo.in(this.quad.NW()) && this.NW) this.NW.insert(bo);else if (bo.in(this.quad.NE()) && this.NE) this.NE.insert(bo);else if (bo.in(this.quad.SW()) && this.SW) this.SW.insert(bo);else if (bo.in(this.quad.SE()) && this.SE) this.SE.insert(bo);\n    } // tslint:disable-next-line\n\n  }, {\n    key: \"_isExternal\",\n    value: function _isExternal() {\n      // four children are null\n      return this.NW == null && this.NE == null && this.SW == null && this.SE == null;\n    } // update the forces\n\n  }, {\n    key: \"updateForce\",\n    value: function updateForce(bo) {\n      if (this.body == null || bo === this.body) {\n        return;\n      } // if the current node is external\n\n\n      if (this._isExternal()) bo.addForce(this.body); // internal nodes\n      else {\n        var s = this.quad ? this.quad.getLength() : 0;\n        var d = this.body.distanceTo(bo); // b is far enough\n\n        if (s / d < this.theta) bo.addForce(this.body);else {\n          this.NW && this.NW.updateForce(bo);\n          this.NE && this.NE.updateForce(bo);\n          this.SW && this.SW.updateForce(bo);\n          this.SE && this.SE.updateForce(bo);\n        }\n      }\n    }\n  }]);\n\n  return QuadTree;\n}();\n\nexport { QuadTree as default };","map":{"version":3,"sources":["../../../src/layout/forceAtlas2/quadTree.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\n * @fileOverview quadTree\n * @author shiwu.wyy@antfin.com\n */\nexport default class QuadTree {\n    // each quadtree represents a quadrant and an aggregate body\n    // that represents all bodies inside the quadrant\n    constructor(param) {\n        /**\n         * (aggregated) body in this quad\n         * @type  {object}\n         */\n        this.body = null;\n        /**\n         * tree representing the northwest quadrant\n         * @type  {object}\n         */\n        this.quad = null;\n        this.NW = null;\n        this.NE = null;\n        this.SW = null;\n        this.SE = null;\n        /**\n         * threshold\n         * @type  {number}\n         */\n        this.theta = 0.5;\n        if (param != null)\n            this.quad = param;\n    }\n    // insert a body(node) into the tree\n    insert(bo) {\n        // if this node does not contain a body, put the new body bo here\n        if (this.body == null) {\n            this.body = bo;\n            return;\n        }\n        // internal node\n        if (!this._isExternal()) {\n            // update mass info\n            this.body = this.body.add(bo);\n            // insert body into quadrant\n            this._putBody(bo);\n        }\n        else { // external node\n            // divide this region into four children\n            if (this.quad) {\n                this.NW = new QuadTree(this.quad.NW());\n                this.NE = new QuadTree(this.quad.NE());\n                this.SW = new QuadTree(this.quad.SW());\n                this.SE = new QuadTree(this.quad.SE());\n            }\n            // insert this body and bo\n            this._putBody(this.body);\n            this._putBody(bo);\n            // update the mass info\n            this.body = this.body.add(bo);\n        }\n    }\n    // inserts bo into a quad\n    // tslint:disable-next-line\n    _putBody(bo) {\n        if (!this.quad)\n            return;\n        if (bo.in(this.quad.NW()) && this.NW)\n            this.NW.insert(bo);\n        else if (bo.in(this.quad.NE()) && this.NE)\n            this.NE.insert(bo);\n        else if (bo.in(this.quad.SW()) && this.SW)\n            this.SW.insert(bo);\n        else if (bo.in(this.quad.SE()) && this.SE)\n            this.SE.insert(bo);\n    }\n    // tslint:disable-next-line\n    _isExternal() {\n        // four children are null\n        return (this.NW == null && this.NE == null && this.SW == null && this.SE == null);\n    }\n    // update the forces\n    updateForce(bo) {\n        if (this.body == null || bo === this.body) {\n            return;\n        }\n        // if the current node is external\n        if (this._isExternal())\n            bo.addForce(this.body);\n        // internal nodes\n        else {\n            const s = this.quad ? this.quad.getLength() : 0;\n            const d = this.body.distanceTo(bo);\n            // b is far enough\n            if ((s / d) < this.theta)\n                bo.addForce(this.body);\n            else {\n                this.NW && this.NW.updateForce(bo);\n                this.NE && this.NE.updateForce(bo);\n                this.SW && this.SW.updateForce(bo);\n                this.SE && this.SE.updateForce(bo);\n            }\n        }\n    }\n}\n//# sourceMappingURL=quadTree.js.map"]},"metadata":{},"sourceType":"module"}