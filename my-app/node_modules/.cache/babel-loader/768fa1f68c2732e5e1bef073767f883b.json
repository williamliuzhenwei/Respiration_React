{"ast":null,"code":"import _classCallCheck from \"/Users/liuzhenwei/Desktop/Respiration_React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/liuzhenwei/Desktop/Respiration_React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n// represents a body(a point mass) and its position\nvar Body = /*#__PURE__*/function () {\n  function Body(params) {\n    _classCallCheck(this, Body);\n\n    /**\n     * the id of this body, the same with the node id\n     * @type  {number}\n     */\n    this.id = params.id || 0;\n    /**\n     * the position of this body\n     * @type  {number}\n     */\n\n    this.rx = params.rx;\n    /**\n     * the position of this body\n     * @type  {number}\n     */\n\n    this.ry = params.ry;\n    /**\n     * the force acting on this body\n     * @type  {number}\n     */\n\n    this.fx = 0;\n    /**\n     * the force acting on this body\n     * @type  {number}\n     */\n\n    this.fy = 0;\n    /**\n     * the mass of this body, =1 for a node\n     * @type  {number}\n     */\n\n    this.mass = params.mass;\n    /**\n     * the degree of the node represented by this body\n     * @type  {number}\n     */\n\n    this.degree = params.degree;\n    /**\n     * the parameter for repulsive force, = kr\n     * @type  {number}\n     */\n\n    this.g = params.g || 0;\n  } // returns the euclidean distance\n\n\n  _createClass(Body, [{\n    key: \"distanceTo\",\n    value: function distanceTo(bo) {\n      var dx = this.rx - bo.rx;\n      var dy = this.ry - bo.ry;\n      return Math.hypot(dx, dy);\n    }\n  }, {\n    key: \"setPos\",\n    value: function setPos(x, y) {\n      this.rx = x;\n      this.ry = y;\n    } // resets the forces\n\n  }, {\n    key: \"resetForce\",\n    value: function resetForce() {\n      this.fx = 0;\n      this.fy = 0;\n    }\n  }, {\n    key: \"addForce\",\n    value: function addForce(b) {\n      var dx = b.rx - this.rx;\n      var dy = b.ry - this.ry;\n      var dist = Math.hypot(dx, dy);\n      dist = dist < 0.0001 ? 0.0001 : dist; // the repulsive defined by force atlas 2\n\n      var F = this.g * (this.degree + 1) * (b.degree + 1) / dist;\n      this.fx += F * dx / dist;\n      this.fy += F * dy / dist;\n    } // if quad contains this body\n\n  }, {\n    key: \"in\",\n    value: function _in(quad) {\n      return quad.contains(this.rx, this.ry);\n    } // returns a new body\n\n  }, {\n    key: \"add\",\n    value: function add(bo) {\n      var nenwMass = this.mass + bo.mass;\n      var x = (this.rx * this.mass + bo.rx * bo.mass) / nenwMass;\n      var y = (this.ry * this.mass + bo.ry * bo.mass) / nenwMass;\n      var dg = this.degree + bo.degree;\n      var params = {\n        rx: x,\n        ry: y,\n        mass: nenwMass,\n        degree: dg\n      };\n      return new Body(params);\n    }\n  }]);\n\n  return Body;\n}();\n\nexport { Body as default };","map":{"version":3,"sources":["../../../src/layout/forceAtlas2/body.ts"],"names":[],"mappings":";;;AAkBA;IACqB,I;AAUnB,gBAAY,MAAZ,EAA6B;AAAA;;AAC3B;;;AAGG;AACH,SAAK,EAAL,GAAU,MAAM,CAAC,EAAP,IAAa,CAAvB;AACA;;;AAGG;;AACH,SAAK,EAAL,GAAU,MAAM,CAAC,EAAjB;AACA;;;AAGG;;AACH,SAAK,EAAL,GAAU,MAAM,CAAC,EAAjB;AACA;;;AAGG;;AACH,SAAK,EAAL,GAAU,CAAV;AACA;;;AAGG;;AACH,SAAK,EAAL,GAAU,CAAV;AACA;;;AAGG;;AACH,SAAK,IAAL,GAAY,MAAM,CAAC,IAAnB;AACA;;;AAGG;;AACH,SAAK,MAAL,GAAc,MAAM,CAAC,MAArB;AACA;;;AAGG;;AACH,SAAK,CAAL,GAAS,MAAM,CAAC,CAAP,IAAY,CAArB;AACD,G,CACD;;;;;WACA,oBAAW,EAAX,EAAmB;AACjB,UAAM,EAAE,GAAG,KAAK,EAAL,GAAU,EAAE,CAAC,EAAxB;AACA,UAAM,EAAE,GAAG,KAAK,EAAL,GAAU,EAAE,CAAC,EAAxB;AACA,aAAO,IAAI,CAAC,KAAL,CAAW,EAAX,EAAe,EAAf,CAAP;AACD;;;WACD,gBAAO,CAAP,EAAkB,CAAlB,EAA2B;AACzB,WAAK,EAAL,GAAU,CAAV;AACA,WAAK,EAAL,GAAU,CAAV;AACD,K,CACD;;;;WACA,sBAAU;AACR,WAAK,EAAL,GAAU,CAAV;AACA,WAAK,EAAL,GAAU,CAAV;AACD;;;WACD,kBAAS,CAAT,EAAgB;AACd,UAAM,EAAE,GAAG,CAAC,CAAC,EAAF,GAAO,KAAK,EAAvB;AACA,UAAM,EAAE,GAAG,CAAC,CAAC,EAAF,GAAO,KAAK,EAAvB;AACA,UAAI,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,EAAX,EAAe,EAAf,CAAX;AACA,MAAA,IAAI,GAAG,IAAI,GAAG,MAAP,GAAgB,MAAhB,GAAyB,IAAhC,CAJc,CAKd;;AACA,UAAM,CAAC,GAAI,KAAK,CAAL,IAAU,KAAK,MAAL,GAAc,CAAxB,KAA8B,CAAC,CAAC,MAAF,GAAW,CAAzC,CAAD,GAAgD,IAA1D;AACA,WAAK,EAAL,IAAW,CAAC,GAAG,EAAJ,GAAS,IAApB;AACA,WAAK,EAAL,IAAW,CAAC,GAAG,EAAJ,GAAS,IAApB;AACD,K,CACD;;;;WACA,aAAG,IAAH,EAAa;AACX,aAAO,IAAI,CAAC,QAAL,CAAc,KAAK,EAAnB,EAAuB,KAAK,EAA5B,CAAP;AACD,K,CACD;;;;WACA,aAAI,EAAJ,EAAY;AACV,UAAM,QAAQ,GAAG,KAAK,IAAL,GAAY,EAAE,CAAC,IAAhC;AACA,UAAM,CAAC,GAAG,CAAC,KAAK,EAAL,GAAU,KAAK,IAAf,GAAsB,EAAE,CAAC,EAAH,GAAQ,EAAE,CAAC,IAAlC,IAA0C,QAApD;AACA,UAAM,CAAC,GAAG,CAAC,KAAK,EAAL,GAAU,KAAK,IAAf,GAAsB,EAAE,CAAC,EAAH,GAAQ,EAAE,CAAC,IAAlC,IAA0C,QAApD;AACA,UAAM,EAAE,GAAG,KAAK,MAAL,GAAc,EAAE,CAAC,MAA5B;AACA,UAAM,MAAM,GAAc;AACxB,QAAA,EAAE,EAAE,CADoB;AAExB,QAAA,EAAE,EAAE,CAFoB;AAGxB,QAAA,IAAI,EAAE,QAHkB;AAIxB,QAAA,MAAM,EAAE;AAJgB,OAA1B;AAMA,aAAO,IAAI,IAAJ,CAAS,MAAT,CAAP;AACD;;;;;;SA9FkB,I","sourceRoot":"","sourcesContent":["// represents a body(a point mass) and its position\nexport default class Body {\n    constructor(params) {\n        /**\n         * the id of this body, the same with the node id\n         * @type  {number}\n         */\n        this.id = params.id || 0;\n        /**\n         * the position of this body\n         * @type  {number}\n         */\n        this.rx = params.rx;\n        /**\n         * the position of this body\n         * @type  {number}\n         */\n        this.ry = params.ry;\n        /**\n         * the force acting on this body\n         * @type  {number}\n         */\n        this.fx = 0;\n        /**\n         * the force acting on this body\n         * @type  {number}\n         */\n        this.fy = 0;\n        /**\n         * the mass of this body, =1 for a node\n         * @type  {number}\n         */\n        this.mass = params.mass;\n        /**\n         * the degree of the node represented by this body\n         * @type  {number}\n         */\n        this.degree = params.degree;\n        /**\n         * the parameter for repulsive force, = kr\n         * @type  {number}\n         */\n        this.g = params.g || 0;\n    }\n    // returns the euclidean distance\n    distanceTo(bo) {\n        const dx = this.rx - bo.rx;\n        const dy = this.ry - bo.ry;\n        return Math.hypot(dx, dy);\n    }\n    setPos(x, y) {\n        this.rx = x;\n        this.ry = y;\n    }\n    // resets the forces\n    resetForce() {\n        this.fx = 0;\n        this.fy = 0;\n    }\n    addForce(b) {\n        const dx = b.rx - this.rx;\n        const dy = b.ry - this.ry;\n        let dist = Math.hypot(dx, dy);\n        dist = dist < 0.0001 ? 0.0001 : dist;\n        // the repulsive defined by force atlas 2\n        const F = (this.g * (this.degree + 1) * (b.degree + 1)) / dist;\n        this.fx += F * dx / dist;\n        this.fy += F * dy / dist;\n    }\n    // if quad contains this body\n    in(quad) {\n        return quad.contains(this.rx, this.ry);\n    }\n    // returns a new body\n    add(bo) {\n        const nenwMass = this.mass + bo.mass;\n        const x = (this.rx * this.mass + bo.rx * bo.mass) / nenwMass;\n        const y = (this.ry * this.mass + bo.ry * bo.mass) / nenwMass;\n        const dg = this.degree + bo.degree;\n        const params = {\n            rx: x,\n            ry: y,\n            mass: nenwMass,\n            degree: dg\n        };\n        return new Body(params);\n    }\n}\n//# sourceMappingURL=body.js.map"]},"metadata":{},"sourceType":"module"}